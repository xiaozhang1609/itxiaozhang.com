<!DOCTYPE html>
<html lang="zh" dir="auto" data-theme="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>批量新建文件夹的三种简便方法 | IT小章</title>
<meta name="keywords" content="批量, python, chatgpt">
<meta name="description" content="本文介绍三种批量创建新文件夹的方法：巧妙高效的 ChatGPT 技巧、便捷实用的在线工具，以及功能强大的 Python 脚本。">
<meta name="author" content="IT小章">
<link rel="canonical" href="http://localhost:1313/batch-create-folders/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fd5566c526ae48aadabd950798a2dc3568536401560eae5caac3765a42a9e7b5.css" integrity="sha256-/VVmxSauSKravZUHmKLcNWhTZAFWDq5cqsN2WkKp57U=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/images/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/images/favicon.ico">
<link rel="apple-touch-icon" href="http://localhost:1313/images/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/images/favicon.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/batch-create-folders/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script><link rel="manifest" href="/site.webmanifest">
<link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png">
<link rel="icon" type="image/svg+xml" href="/images/favicon.svg">

</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="IT小章 (Alt + H)">IT小章</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="🏠 首页">
                    <span>🏠 首页</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts/" title="📚 文章">
                    <span>📚 文章</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives/" title="⏱️ 归档">
                    <span>⏱️ 归档</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="🔍 搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍 搜索</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/" title="🙋 关于">
                    <span>🙋 关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">
<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      批量新建文件夹的三种简便方法
    </h1>
    <div class="post-description">
      本文介绍三种批量创建新文件夹的方法：巧妙高效的 ChatGPT 技巧、便捷实用的在线工具，以及功能强大的 Python 脚本。
    </div>
    <div class="post-meta"><span title='2025-08-20 23:19:53 +0800 CST'>2025年8月20日</span>&nbsp;·&nbsp;<span>12 分钟</span>&nbsp;·&nbsp;<span>IT小章</span>

</div>
  </header> 
  <div class="post-content"><blockquote>
<p>原文地址：<a href="https://itxiaozhang.com/batch-create-folders/">https://itxiaozhang.com/batch-create-folders/</a><br>
如果您需要远程电脑维修或者编程开发，请<a href="https://zhang9.cn">加我微信</a>咨询。</p>
</blockquote>
<h2 id="-常见场景">📌 常见场景<a hidden class="anchor" aria-hidden="true" href="#-常见场景">#</a></h2>
<ol>
<li><strong>员工资料</strong>：公司新入职 200 名员工，需要批量生成个人资料文件夹。</li>
<li><strong>学生作业</strong>：某班级 60 名学生上交作业，老师按花名册批量生成作业文件夹。</li>
<li><strong>项目成员</strong>：一个跨部门项目组有 50 名成员，项目经理为其批量创建任务资料文件夹。</li>
</ol>
<hr>
<h2 id="-为什么要批量创建文件夹">💡 为什么要批量创建文件夹<a hidden class="anchor" aria-hidden="true" href="#-为什么要批量创建文件夹">#</a></h2>
<p>手动逐个新建既耗时又容易出错。
无论是为 20 个部门建文件夹，还是整理 100 张照片，重复操作都会浪费时间。
批量方式可节省约 <strong>90% 时间</strong>，让你专注更重要的工作。</p>
<hr>
<h2 id="方法一chatgpt-帮忙">方法一：ChatGPT 帮忙<a hidden class="anchor" aria-hidden="true" href="#方法一chatgpt-帮忙">#</a></h2>
<p>将以下代码粘贴给 ChatGPT，让其执行：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-0-1"><a class="lnlinks" href="#hl-0-1">  1</a>
</span><span class="lnt" id="hl-0-2"><a class="lnlinks" href="#hl-0-2">  2</a>
</span><span class="lnt" id="hl-0-3"><a class="lnlinks" href="#hl-0-3">  3</a>
</span><span class="lnt" id="hl-0-4"><a class="lnlinks" href="#hl-0-4">  4</a>
</span><span class="lnt" id="hl-0-5"><a class="lnlinks" href="#hl-0-5">  5</a>
</span><span class="lnt" id="hl-0-6"><a class="lnlinks" href="#hl-0-6">  6</a>
</span><span class="lnt" id="hl-0-7"><a class="lnlinks" href="#hl-0-7">  7</a>
</span><span class="lnt" id="hl-0-8"><a class="lnlinks" href="#hl-0-8">  8</a>
</span><span class="lnt" id="hl-0-9"><a class="lnlinks" href="#hl-0-9">  9</a>
</span><span class="lnt" id="hl-0-10"><a class="lnlinks" href="#hl-0-10"> 10</a>
</span><span class="lnt" id="hl-0-11"><a class="lnlinks" href="#hl-0-11"> 11</a>
</span><span class="lnt" id="hl-0-12"><a class="lnlinks" href="#hl-0-12"> 12</a>
</span><span class="lnt" id="hl-0-13"><a class="lnlinks" href="#hl-0-13"> 13</a>
</span><span class="lnt" id="hl-0-14"><a class="lnlinks" href="#hl-0-14"> 14</a>
</span><span class="lnt" id="hl-0-15"><a class="lnlinks" href="#hl-0-15"> 15</a>
</span><span class="lnt" id="hl-0-16"><a class="lnlinks" href="#hl-0-16"> 16</a>
</span><span class="lnt" id="hl-0-17"><a class="lnlinks" href="#hl-0-17"> 17</a>
</span><span class="lnt" id="hl-0-18"><a class="lnlinks" href="#hl-0-18"> 18</a>
</span><span class="lnt" id="hl-0-19"><a class="lnlinks" href="#hl-0-19"> 19</a>
</span><span class="lnt" id="hl-0-20"><a class="lnlinks" href="#hl-0-20"> 20</a>
</span><span class="lnt" id="hl-0-21"><a class="lnlinks" href="#hl-0-21"> 21</a>
</span><span class="lnt" id="hl-0-22"><a class="lnlinks" href="#hl-0-22"> 22</a>
</span><span class="lnt" id="hl-0-23"><a class="lnlinks" href="#hl-0-23"> 23</a>
</span><span class="lnt" id="hl-0-24"><a class="lnlinks" href="#hl-0-24"> 24</a>
</span><span class="lnt" id="hl-0-25"><a class="lnlinks" href="#hl-0-25"> 25</a>
</span><span class="lnt" id="hl-0-26"><a class="lnlinks" href="#hl-0-26"> 26</a>
</span><span class="lnt" id="hl-0-27"><a class="lnlinks" href="#hl-0-27"> 27</a>
</span><span class="lnt" id="hl-0-28"><a class="lnlinks" href="#hl-0-28"> 28</a>
</span><span class="lnt" id="hl-0-29"><a class="lnlinks" href="#hl-0-29"> 29</a>
</span><span class="lnt" id="hl-0-30"><a class="lnlinks" href="#hl-0-30"> 30</a>
</span><span class="lnt" id="hl-0-31"><a class="lnlinks" href="#hl-0-31"> 31</a>
</span><span class="lnt" id="hl-0-32"><a class="lnlinks" href="#hl-0-32"> 32</a>
</span><span class="lnt" id="hl-0-33"><a class="lnlinks" href="#hl-0-33"> 33</a>
</span><span class="lnt" id="hl-0-34"><a class="lnlinks" href="#hl-0-34"> 34</a>
</span><span class="lnt" id="hl-0-35"><a class="lnlinks" href="#hl-0-35"> 35</a>
</span><span class="lnt" id="hl-0-36"><a class="lnlinks" href="#hl-0-36"> 36</a>
</span><span class="lnt" id="hl-0-37"><a class="lnlinks" href="#hl-0-37"> 37</a>
</span><span class="lnt" id="hl-0-38"><a class="lnlinks" href="#hl-0-38"> 38</a>
</span><span class="lnt" id="hl-0-39"><a class="lnlinks" href="#hl-0-39"> 39</a>
</span><span class="lnt" id="hl-0-40"><a class="lnlinks" href="#hl-0-40"> 40</a>
</span><span class="lnt" id="hl-0-41"><a class="lnlinks" href="#hl-0-41"> 41</a>
</span><span class="lnt" id="hl-0-42"><a class="lnlinks" href="#hl-0-42"> 42</a>
</span><span class="lnt" id="hl-0-43"><a class="lnlinks" href="#hl-0-43"> 43</a>
</span><span class="lnt" id="hl-0-44"><a class="lnlinks" href="#hl-0-44"> 44</a>
</span><span class="lnt" id="hl-0-45"><a class="lnlinks" href="#hl-0-45"> 45</a>
</span><span class="lnt" id="hl-0-46"><a class="lnlinks" href="#hl-0-46"> 46</a>
</span><span class="lnt" id="hl-0-47"><a class="lnlinks" href="#hl-0-47"> 47</a>
</span><span class="lnt" id="hl-0-48"><a class="lnlinks" href="#hl-0-48"> 48</a>
</span><span class="lnt" id="hl-0-49"><a class="lnlinks" href="#hl-0-49"> 49</a>
</span><span class="lnt" id="hl-0-50"><a class="lnlinks" href="#hl-0-50"> 50</a>
</span><span class="lnt" id="hl-0-51"><a class="lnlinks" href="#hl-0-51"> 51</a>
</span><span class="lnt" id="hl-0-52"><a class="lnlinks" href="#hl-0-52"> 52</a>
</span><span class="lnt" id="hl-0-53"><a class="lnlinks" href="#hl-0-53"> 53</a>
</span><span class="lnt" id="hl-0-54"><a class="lnlinks" href="#hl-0-54"> 54</a>
</span><span class="lnt" id="hl-0-55"><a class="lnlinks" href="#hl-0-55"> 55</a>
</span><span class="lnt" id="hl-0-56"><a class="lnlinks" href="#hl-0-56"> 56</a>
</span><span class="lnt" id="hl-0-57"><a class="lnlinks" href="#hl-0-57"> 57</a>
</span><span class="lnt" id="hl-0-58"><a class="lnlinks" href="#hl-0-58"> 58</a>
</span><span class="lnt" id="hl-0-59"><a class="lnlinks" href="#hl-0-59"> 59</a>
</span><span class="lnt" id="hl-0-60"><a class="lnlinks" href="#hl-0-60"> 60</a>
</span><span class="lnt" id="hl-0-61"><a class="lnlinks" href="#hl-0-61"> 61</a>
</span><span class="lnt" id="hl-0-62"><a class="lnlinks" href="#hl-0-62"> 62</a>
</span><span class="lnt" id="hl-0-63"><a class="lnlinks" href="#hl-0-63"> 63</a>
</span><span class="lnt" id="hl-0-64"><a class="lnlinks" href="#hl-0-64"> 64</a>
</span><span class="lnt" id="hl-0-65"><a class="lnlinks" href="#hl-0-65"> 65</a>
</span><span class="lnt" id="hl-0-66"><a class="lnlinks" href="#hl-0-66"> 66</a>
</span><span class="lnt" id="hl-0-67"><a class="lnlinks" href="#hl-0-67"> 67</a>
</span><span class="lnt" id="hl-0-68"><a class="lnlinks" href="#hl-0-68"> 68</a>
</span><span class="lnt" id="hl-0-69"><a class="lnlinks" href="#hl-0-69"> 69</a>
</span><span class="lnt" id="hl-0-70"><a class="lnlinks" href="#hl-0-70"> 70</a>
</span><span class="lnt" id="hl-0-71"><a class="lnlinks" href="#hl-0-71"> 71</a>
</span><span class="lnt" id="hl-0-72"><a class="lnlinks" href="#hl-0-72"> 72</a>
</span><span class="lnt" id="hl-0-73"><a class="lnlinks" href="#hl-0-73"> 73</a>
</span><span class="lnt" id="hl-0-74"><a class="lnlinks" href="#hl-0-74"> 74</a>
</span><span class="lnt" id="hl-0-75"><a class="lnlinks" href="#hl-0-75"> 75</a>
</span><span class="lnt" id="hl-0-76"><a class="lnlinks" href="#hl-0-76"> 76</a>
</span><span class="lnt" id="hl-0-77"><a class="lnlinks" href="#hl-0-77"> 77</a>
</span><span class="lnt" id="hl-0-78"><a class="lnlinks" href="#hl-0-78"> 78</a>
</span><span class="lnt" id="hl-0-79"><a class="lnlinks" href="#hl-0-79"> 79</a>
</span><span class="lnt" id="hl-0-80"><a class="lnlinks" href="#hl-0-80"> 80</a>
</span><span class="lnt" id="hl-0-81"><a class="lnlinks" href="#hl-0-81"> 81</a>
</span><span class="lnt" id="hl-0-82"><a class="lnlinks" href="#hl-0-82"> 82</a>
</span><span class="lnt" id="hl-0-83"><a class="lnlinks" href="#hl-0-83"> 83</a>
</span><span class="lnt" id="hl-0-84"><a class="lnlinks" href="#hl-0-84"> 84</a>
</span><span class="lnt" id="hl-0-85"><a class="lnlinks" href="#hl-0-85"> 85</a>
</span><span class="lnt" id="hl-0-86"><a class="lnlinks" href="#hl-0-86"> 86</a>
</span><span class="lnt" id="hl-0-87"><a class="lnlinks" href="#hl-0-87"> 87</a>
</span><span class="lnt" id="hl-0-88"><a class="lnlinks" href="#hl-0-88"> 88</a>
</span><span class="lnt" id="hl-0-89"><a class="lnlinks" href="#hl-0-89"> 89</a>
</span><span class="lnt" id="hl-0-90"><a class="lnlinks" href="#hl-0-90"> 90</a>
</span><span class="lnt" id="hl-0-91"><a class="lnlinks" href="#hl-0-91"> 91</a>
</span><span class="lnt" id="hl-0-92"><a class="lnlinks" href="#hl-0-92"> 92</a>
</span><span class="lnt" id="hl-0-93"><a class="lnlinks" href="#hl-0-93"> 93</a>
</span><span class="lnt" id="hl-0-94"><a class="lnlinks" href="#hl-0-94"> 94</a>
</span><span class="lnt" id="hl-0-95"><a class="lnlinks" href="#hl-0-95"> 95</a>
</span><span class="lnt" id="hl-0-96"><a class="lnlinks" href="#hl-0-96"> 96</a>
</span><span class="lnt" id="hl-0-97"><a class="lnlinks" href="#hl-0-97"> 97</a>
</span><span class="lnt" id="hl-0-98"><a class="lnlinks" href="#hl-0-98"> 98</a>
</span><span class="lnt" id="hl-0-99"><a class="lnlinks" href="#hl-0-99"> 99</a>
</span><span class="lnt" id="hl-0-100"><a class="lnlinks" href="#hl-0-100">100</a>
</span><span class="lnt" id="hl-0-101"><a class="lnlinks" href="#hl-0-101">101</a>
</span><span class="lnt" id="hl-0-102"><a class="lnlinks" href="#hl-0-102">102</a>
</span><span class="lnt" id="hl-0-103"><a class="lnlinks" href="#hl-0-103">103</a>
</span><span class="lnt" id="hl-0-104"><a class="lnlinks" href="#hl-0-104">104</a>
</span><span class="lnt" id="hl-0-105"><a class="lnlinks" href="#hl-0-105">105</a>
</span><span class="lnt" id="hl-0-106"><a class="lnlinks" href="#hl-0-106">106</a>
</span><span class="lnt" id="hl-0-107"><a class="lnlinks" href="#hl-0-107">107</a>
</span><span class="lnt" id="hl-0-108"><a class="lnlinks" href="#hl-0-108">108</a>
</span><span class="lnt" id="hl-0-109"><a class="lnlinks" href="#hl-0-109">109</a>
</span><span class="lnt" id="hl-0-110"><a class="lnlinks" href="#hl-0-110">110</a>
</span><span class="lnt" id="hl-0-111"><a class="lnlinks" href="#hl-0-111">111</a>
</span><span class="lnt" id="hl-0-112"><a class="lnlinks" href="#hl-0-112">112</a>
</span><span class="lnt" id="hl-0-113"><a class="lnlinks" href="#hl-0-113">113</a>
</span><span class="lnt" id="hl-0-114"><a class="lnlinks" href="#hl-0-114">114</a>
</span><span class="lnt" id="hl-0-115"><a class="lnlinks" href="#hl-0-115">115</a>
</span><span class="lnt" id="hl-0-116"><a class="lnlinks" href="#hl-0-116">116</a>
</span><span class="lnt" id="hl-0-117"><a class="lnlinks" href="#hl-0-117">117</a>
</span><span class="lnt" id="hl-0-118"><a class="lnlinks" href="#hl-0-118">118</a>
</span><span class="lnt" id="hl-0-119"><a class="lnlinks" href="#hl-0-119">119</a>
</span><span class="lnt" id="hl-0-120"><a class="lnlinks" href="#hl-0-120">120</a>
</span><span class="lnt" id="hl-0-121"><a class="lnlinks" href="#hl-0-121">121</a>
</span><span class="lnt" id="hl-0-122"><a class="lnlinks" href="#hl-0-122">122</a>
</span><span class="lnt" id="hl-0-123"><a class="lnlinks" href="#hl-0-123">123</a>
</span><span class="lnt" id="hl-0-124"><a class="lnlinks" href="#hl-0-124">124</a>
</span><span class="lnt" id="hl-0-125"><a class="lnlinks" href="#hl-0-125">125</a>
</span><span class="lnt" id="hl-0-126"><a class="lnlinks" href="#hl-0-126">126</a>
</span><span class="lnt" id="hl-0-127"><a class="lnlinks" href="#hl-0-127">127</a>
</span><span class="lnt" id="hl-0-128"><a class="lnlinks" href="#hl-0-128">128</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># 请作为Python解释器运行以下代码</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">zipfile</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">os</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 文件夹和文件名列表，可以增加或者替换更多</span>
</span></span><span class="line"><span class="cl"><span class="n">names</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;唐僧
</span></span></span><span class="line"><span class="cl"><span class="s2">孙悟空
</span></span></span><span class="line"><span class="cl"><span class="s2">猪八戒
</span></span></span><span class="line"><span class="cl"><span class="s2">沙和尚
</span></span></span><span class="line"><span class="cl"><span class="s2">白龙马
</span></span></span><span class="line"><span class="cl"><span class="s2">玉皇大帝
</span></span></span><span class="line"><span class="cl"><span class="s2">王母娘娘
</span></span></span><span class="line"><span class="cl"><span class="s2">太上老君
</span></span></span><span class="line"><span class="cl"><span class="s2">太白金星
</span></span></span><span class="line"><span class="cl"><span class="s2">托塔李天王
</span></span></span><span class="line"><span class="cl"><span class="s2">哪吒三太子
</span></span></span><span class="line"><span class="cl"><span class="s2">二郎神
</span></span></span><span class="line"><span class="cl"><span class="s2">四大天王
</span></span></span><span class="line"><span class="cl"><span class="s2">巨灵神
</span></span></span><span class="line"><span class="cl"><span class="s2">二十八宿
</span></span></span><span class="line"><span class="cl"><span class="s2">雷公
</span></span></span><span class="line"><span class="cl"><span class="s2">电母
</span></span></span><span class="line"><span class="cl"><span class="s2">风伯
</span></span></span><span class="line"><span class="cl"><span class="s2">雨师
</span></span></span><span class="line"><span class="cl"><span class="s2">赤脚大仙
</span></span></span><span class="line"><span class="cl"><span class="s2">福禄寿三星
</span></span></span><span class="line"><span class="cl"><span class="s2">镇元子
</span></span></span><span class="line"><span class="cl"><span class="s2">如来佛祖
</span></span></span><span class="line"><span class="cl"><span class="s2">观音菩萨
</span></span></span><span class="line"><span class="cl"><span class="s2">文殊菩萨
</span></span></span><span class="line"><span class="cl"><span class="s2">普贤菩萨
</span></span></span><span class="line"><span class="cl"><span class="s2">地藏王菩萨
</span></span></span><span class="line"><span class="cl"><span class="s2">弥勒佛
</span></span></span><span class="line"><span class="cl"><span class="s2">燃灯古佛
</span></span></span><span class="line"><span class="cl"><span class="s2">十八罗汉
</span></span></span><span class="line"><span class="cl"><span class="s2">阿傩
</span></span></span><span class="line"><span class="cl"><span class="s2">伽叶
</span></span></span><span class="line"><span class="cl"><span class="s2">寅将军
</span></span></span><span class="line"><span class="cl"><span class="s2">熊山君
</span></span></span><span class="line"><span class="cl"><span class="s2">特处士
</span></span></span><span class="line"><span class="cl"><span class="s2">白骨精
</span></span></span><span class="line"><span class="cl"><span class="s2">黄袍怪
</span></span></span><span class="line"><span class="cl"><span class="s2">金角大王
</span></span></span><span class="line"><span class="cl"><span class="s2">银角大王
</span></span></span><span class="line"><span class="cl"><span class="s2">九尾狐狸
</span></span></span><span class="line"><span class="cl"><span class="s2">狮猁怪
</span></span></span><span class="line"><span class="cl"><span class="s2">红孩儿
</span></span></span><span class="line"><span class="cl"><span class="s2">鼍龙
</span></span></span><span class="line"><span class="cl"><span class="s2">虎力大仙
</span></span></span><span class="line"><span class="cl"><span class="s2">鹿力大仙
</span></span></span><span class="line"><span class="cl"><span class="s2">羊力大仙
</span></span></span><span class="line"><span class="cl"><span class="s2">灵感大王
</span></span></span><span class="line"><span class="cl"><span class="s2">独角兕大王
</span></span></span><span class="line"><span class="cl"><span class="s2">蝎子精
</span></span></span><span class="line"><span class="cl"><span class="s2">六耳猕猴
</span></span></span><span class="line"><span class="cl"><span class="s2">铁扇公主
</span></span></span><span class="line"><span class="cl"><span class="s2">牛魔王
</span></span></span><span class="line"><span class="cl"><span class="s2">玉面狐狸
</span></span></span><span class="line"><span class="cl"><span class="s2">万圣龙王
</span></span></span><span class="line"><span class="cl"><span class="s2">九头虫
</span></span></span><span class="line"><span class="cl"><span class="s2">黄眉老祖
</span></span></span><span class="line"><span class="cl"><span class="s2">蟒蛇精
</span></span></span><span class="line"><span class="cl"><span class="s2">赛太岁
</span></span></span><span class="line"><span class="cl"><span class="s2">蜘蛛精
</span></span></span><span class="line"><span class="cl"><span class="s2">百眼魔君
</span></span></span><span class="line"><span class="cl"><span class="s2">青狮
</span></span></span><span class="line"><span class="cl"><span class="s2">白象
</span></span></span><span class="line"><span class="cl"><span class="s2">大鹏金翅雕
</span></span></span><span class="line"><span class="cl"><span class="s2">白鹿精
</span></span></span><span class="line"><span class="cl"><span class="s2">白面狐狸
</span></span></span><span class="line"><span class="cl"><span class="s2">地涌夫人
</span></span></span><span class="line"><span class="cl"><span class="s2">南山大王
</span></span></span><span class="line"><span class="cl"><span class="s2">黄狮精
</span></span></span><span class="line"><span class="cl"><span class="s2">九灵元圣
</span></span></span><span class="line"><span class="cl"><span class="s2">辟寒大王
</span></span></span><span class="line"><span class="cl"><span class="s2">辟暑大王
</span></span></span><span class="line"><span class="cl"><span class="s2">辟尘大王
</span></span></span><span class="line"><span class="cl"><span class="s2">玉兔精
</span></span></span><span class="line"><span class="cl"><span class="s2">混世魔王
</span></span></span><span class="line"><span class="cl"><span class="s2">黑熊精
</span></span></span><span class="line"><span class="cl"><span class="s2">凌虚子
</span></span></span><span class="line"><span class="cl"><span class="s2">白衣秀士
</span></span></span><span class="line"><span class="cl"><span class="s2">虎先锋
</span></span></span><span class="line"><span class="cl"><span class="s2">黄风怪
</span></span></span><span class="line"><span class="cl"><span class="s2">精细鬼
</span></span></span><span class="line"><span class="cl"><span class="s2">伶俐虫
</span></span></span><span class="line"><span class="cl"><span class="s2">巴山虎
</span></span></span><span class="line"><span class="cl"><span class="s2">倚海龙
</span></span></span><span class="line"><span class="cl"><span class="s2">狐阿七大王
</span></span></span><span class="line"><span class="cl"><span class="s2">宝象国国王
</span></span></span><span class="line"><span class="cl"><span class="s2">百花羞公主
</span></span></span><span class="line"><span class="cl"><span class="s2">乌鸡国国王
</span></span></span><span class="line"><span class="cl"><span class="s2">车迟国国王
</span></span></span><span class="line"><span class="cl"><span class="s2">女儿国国王
</span></span></span><span class="line"><span class="cl"><span class="s2">朱紫国国王
</span></span></span><span class="line"><span class="cl"><span class="s2">比丘国国王
</span></span></span><span class="line"><span class="cl"><span class="s2">灭法国国王
</span></span></span><span class="line"><span class="cl"><span class="s2">寇员外
</span></span></span><span class="line"><span class="cl"><span class="s2">陈光蕊
</span></span></span><span class="line"><span class="cl"><span class="s2">殷温娇
</span></span></span><span class="line"><span class="cl"><span class="s2">刘伯钦
</span></span></span><span class="line"><span class="cl"><span class="s2">高太公
</span></span></span><span class="line"><span class="cl"><span class="s2">高翠兰
</span></span></span><span class="line"><span class="cl"><span class="s2">唐太宗
</span></span></span><span class="line"><span class="cl"><span class="s2">李世民
</span></span></span><span class="line"><span class="cl"><span class="s2">房玄龄
</span></span></span><span class="line"><span class="cl"><span class="s2">杜如晦
</span></span></span><span class="line"><span class="cl"><span class="s2">徐茂公&#34;&#34;&#34;</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">base_dir</span> <span class="o">=</span> <span class="s2">&#34;/mnt/data/named_folders&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">zip_filename</span> <span class="o">=</span> <span class="s2">&#34;/mnt/data/named_folders.zip&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 创建文件夹</span>
</span></span><span class="line"><span class="cl"><span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">name</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 压缩文件夹</span>
</span></span><span class="line"><span class="cl"><span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">zip_filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZIP_DEFLATED</span><span class="p">)</span> <span class="k">as</span> <span class="n">zipf</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">base_dir</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">zipf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">base_dir</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="nb">dir</span> <span class="ow">in</span> <span class="n">dirs</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">dir_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="nb">dir</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">zipf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">base_dir</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">zip_filename</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="方法二纯前端在线工具">方法二：纯前端在线工具<a hidden class="anchor" aria-hidden="true" href="#方法二纯前端在线工具">#</a></h2>
<h3 id="特点">特点<a hidden class="anchor" aria-hidden="true" href="#特点">#</a></h3>
<ul>
<li><strong>无需安装</strong>：网页直接用，文件不上传服务器。</li>
<li><strong>操作简单</strong>：上传名单 → 一键生成压缩包。</li>
<li><strong>智能处理</strong>：自动去除空行与非法字符。</li>
</ul>
<h3 id="使用步骤">使用步骤<a hidden class="anchor" aria-hidden="true" href="#使用步骤">#</a></h3>
<ol>
<li>准备文本文件，每行一个名称。</li>
<li>打开 <a href="https://v0-user-can-you-help-me-understand-lake.vercel.app/">批量文件夹生成器</a></li>
<li>上传文件并预览。</li>
<li>点击 <strong>生成 ZIP</strong> → 下载 → 解压即可。</li>
</ol>
<h3 id="核心代码">核心代码<a hidden class="anchor" aria-hidden="true" href="#核心代码">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-1-1"><a class="lnlinks" href="#hl-1-1">  1</a>
</span><span class="lnt" id="hl-1-2"><a class="lnlinks" href="#hl-1-2">  2</a>
</span><span class="lnt" id="hl-1-3"><a class="lnlinks" href="#hl-1-3">  3</a>
</span><span class="lnt" id="hl-1-4"><a class="lnlinks" href="#hl-1-4">  4</a>
</span><span class="lnt" id="hl-1-5"><a class="lnlinks" href="#hl-1-5">  5</a>
</span><span class="lnt" id="hl-1-6"><a class="lnlinks" href="#hl-1-6">  6</a>
</span><span class="lnt" id="hl-1-7"><a class="lnlinks" href="#hl-1-7">  7</a>
</span><span class="lnt" id="hl-1-8"><a class="lnlinks" href="#hl-1-8">  8</a>
</span><span class="lnt" id="hl-1-9"><a class="lnlinks" href="#hl-1-9">  9</a>
</span><span class="lnt" id="hl-1-10"><a class="lnlinks" href="#hl-1-10"> 10</a>
</span><span class="lnt" id="hl-1-11"><a class="lnlinks" href="#hl-1-11"> 11</a>
</span><span class="lnt" id="hl-1-12"><a class="lnlinks" href="#hl-1-12"> 12</a>
</span><span class="lnt" id="hl-1-13"><a class="lnlinks" href="#hl-1-13"> 13</a>
</span><span class="lnt" id="hl-1-14"><a class="lnlinks" href="#hl-1-14"> 14</a>
</span><span class="lnt" id="hl-1-15"><a class="lnlinks" href="#hl-1-15"> 15</a>
</span><span class="lnt" id="hl-1-16"><a class="lnlinks" href="#hl-1-16"> 16</a>
</span><span class="lnt" id="hl-1-17"><a class="lnlinks" href="#hl-1-17"> 17</a>
</span><span class="lnt" id="hl-1-18"><a class="lnlinks" href="#hl-1-18"> 18</a>
</span><span class="lnt" id="hl-1-19"><a class="lnlinks" href="#hl-1-19"> 19</a>
</span><span class="lnt" id="hl-1-20"><a class="lnlinks" href="#hl-1-20"> 20</a>
</span><span class="lnt" id="hl-1-21"><a class="lnlinks" href="#hl-1-21"> 21</a>
</span><span class="lnt" id="hl-1-22"><a class="lnlinks" href="#hl-1-22"> 22</a>
</span><span class="lnt" id="hl-1-23"><a class="lnlinks" href="#hl-1-23"> 23</a>
</span><span class="lnt" id="hl-1-24"><a class="lnlinks" href="#hl-1-24"> 24</a>
</span><span class="lnt" id="hl-1-25"><a class="lnlinks" href="#hl-1-25"> 25</a>
</span><span class="lnt" id="hl-1-26"><a class="lnlinks" href="#hl-1-26"> 26</a>
</span><span class="lnt" id="hl-1-27"><a class="lnlinks" href="#hl-1-27"> 27</a>
</span><span class="lnt" id="hl-1-28"><a class="lnlinks" href="#hl-1-28"> 28</a>
</span><span class="lnt" id="hl-1-29"><a class="lnlinks" href="#hl-1-29"> 29</a>
</span><span class="lnt" id="hl-1-30"><a class="lnlinks" href="#hl-1-30"> 30</a>
</span><span class="lnt" id="hl-1-31"><a class="lnlinks" href="#hl-1-31"> 31</a>
</span><span class="lnt" id="hl-1-32"><a class="lnlinks" href="#hl-1-32"> 32</a>
</span><span class="lnt" id="hl-1-33"><a class="lnlinks" href="#hl-1-33"> 33</a>
</span><span class="lnt" id="hl-1-34"><a class="lnlinks" href="#hl-1-34"> 34</a>
</span><span class="lnt" id="hl-1-35"><a class="lnlinks" href="#hl-1-35"> 35</a>
</span><span class="lnt" id="hl-1-36"><a class="lnlinks" href="#hl-1-36"> 36</a>
</span><span class="lnt" id="hl-1-37"><a class="lnlinks" href="#hl-1-37"> 37</a>
</span><span class="lnt" id="hl-1-38"><a class="lnlinks" href="#hl-1-38"> 38</a>
</span><span class="lnt" id="hl-1-39"><a class="lnlinks" href="#hl-1-39"> 39</a>
</span><span class="lnt" id="hl-1-40"><a class="lnlinks" href="#hl-1-40"> 40</a>
</span><span class="lnt" id="hl-1-41"><a class="lnlinks" href="#hl-1-41"> 41</a>
</span><span class="lnt" id="hl-1-42"><a class="lnlinks" href="#hl-1-42"> 42</a>
</span><span class="lnt" id="hl-1-43"><a class="lnlinks" href="#hl-1-43"> 43</a>
</span><span class="lnt" id="hl-1-44"><a class="lnlinks" href="#hl-1-44"> 44</a>
</span><span class="lnt" id="hl-1-45"><a class="lnlinks" href="#hl-1-45"> 45</a>
</span><span class="lnt" id="hl-1-46"><a class="lnlinks" href="#hl-1-46"> 46</a>
</span><span class="lnt" id="hl-1-47"><a class="lnlinks" href="#hl-1-47"> 47</a>
</span><span class="lnt" id="hl-1-48"><a class="lnlinks" href="#hl-1-48"> 48</a>
</span><span class="lnt" id="hl-1-49"><a class="lnlinks" href="#hl-1-49"> 49</a>
</span><span class="lnt" id="hl-1-50"><a class="lnlinks" href="#hl-1-50"> 50</a>
</span><span class="lnt" id="hl-1-51"><a class="lnlinks" href="#hl-1-51"> 51</a>
</span><span class="lnt" id="hl-1-52"><a class="lnlinks" href="#hl-1-52"> 52</a>
</span><span class="lnt" id="hl-1-53"><a class="lnlinks" href="#hl-1-53"> 53</a>
</span><span class="lnt" id="hl-1-54"><a class="lnlinks" href="#hl-1-54"> 54</a>
</span><span class="lnt" id="hl-1-55"><a class="lnlinks" href="#hl-1-55"> 55</a>
</span><span class="lnt" id="hl-1-56"><a class="lnlinks" href="#hl-1-56"> 56</a>
</span><span class="lnt" id="hl-1-57"><a class="lnlinks" href="#hl-1-57"> 57</a>
</span><span class="lnt" id="hl-1-58"><a class="lnlinks" href="#hl-1-58"> 58</a>
</span><span class="lnt" id="hl-1-59"><a class="lnlinks" href="#hl-1-59"> 59</a>
</span><span class="lnt" id="hl-1-60"><a class="lnlinks" href="#hl-1-60"> 60</a>
</span><span class="lnt" id="hl-1-61"><a class="lnlinks" href="#hl-1-61"> 61</a>
</span><span class="lnt" id="hl-1-62"><a class="lnlinks" href="#hl-1-62"> 62</a>
</span><span class="lnt" id="hl-1-63"><a class="lnlinks" href="#hl-1-63"> 63</a>
</span><span class="lnt" id="hl-1-64"><a class="lnlinks" href="#hl-1-64"> 64</a>
</span><span class="lnt" id="hl-1-65"><a class="lnlinks" href="#hl-1-65"> 65</a>
</span><span class="lnt" id="hl-1-66"><a class="lnlinks" href="#hl-1-66"> 66</a>
</span><span class="lnt" id="hl-1-67"><a class="lnlinks" href="#hl-1-67"> 67</a>
</span><span class="lnt" id="hl-1-68"><a class="lnlinks" href="#hl-1-68"> 68</a>
</span><span class="lnt" id="hl-1-69"><a class="lnlinks" href="#hl-1-69"> 69</a>
</span><span class="lnt" id="hl-1-70"><a class="lnlinks" href="#hl-1-70"> 70</a>
</span><span class="lnt" id="hl-1-71"><a class="lnlinks" href="#hl-1-71"> 71</a>
</span><span class="lnt" id="hl-1-72"><a class="lnlinks" href="#hl-1-72"> 72</a>
</span><span class="lnt" id="hl-1-73"><a class="lnlinks" href="#hl-1-73"> 73</a>
</span><span class="lnt" id="hl-1-74"><a class="lnlinks" href="#hl-1-74"> 74</a>
</span><span class="lnt" id="hl-1-75"><a class="lnlinks" href="#hl-1-75"> 75</a>
</span><span class="lnt" id="hl-1-76"><a class="lnlinks" href="#hl-1-76"> 76</a>
</span><span class="lnt" id="hl-1-77"><a class="lnlinks" href="#hl-1-77"> 77</a>
</span><span class="lnt" id="hl-1-78"><a class="lnlinks" href="#hl-1-78"> 78</a>
</span><span class="lnt" id="hl-1-79"><a class="lnlinks" href="#hl-1-79"> 79</a>
</span><span class="lnt" id="hl-1-80"><a class="lnlinks" href="#hl-1-80"> 80</a>
</span><span class="lnt" id="hl-1-81"><a class="lnlinks" href="#hl-1-81"> 81</a>
</span><span class="lnt" id="hl-1-82"><a class="lnlinks" href="#hl-1-82"> 82</a>
</span><span class="lnt" id="hl-1-83"><a class="lnlinks" href="#hl-1-83"> 83</a>
</span><span class="lnt" id="hl-1-84"><a class="lnlinks" href="#hl-1-84"> 84</a>
</span><span class="lnt" id="hl-1-85"><a class="lnlinks" href="#hl-1-85"> 85</a>
</span><span class="lnt" id="hl-1-86"><a class="lnlinks" href="#hl-1-86"> 86</a>
</span><span class="lnt" id="hl-1-87"><a class="lnlinks" href="#hl-1-87"> 87</a>
</span><span class="lnt" id="hl-1-88"><a class="lnlinks" href="#hl-1-88"> 88</a>
</span><span class="lnt" id="hl-1-89"><a class="lnlinks" href="#hl-1-89"> 89</a>
</span><span class="lnt" id="hl-1-90"><a class="lnlinks" href="#hl-1-90"> 90</a>
</span><span class="lnt" id="hl-1-91"><a class="lnlinks" href="#hl-1-91"> 91</a>
</span><span class="lnt" id="hl-1-92"><a class="lnlinks" href="#hl-1-92"> 92</a>
</span><span class="lnt" id="hl-1-93"><a class="lnlinks" href="#hl-1-93"> 93</a>
</span><span class="lnt" id="hl-1-94"><a class="lnlinks" href="#hl-1-94"> 94</a>
</span><span class="lnt" id="hl-1-95"><a class="lnlinks" href="#hl-1-95"> 95</a>
</span><span class="lnt" id="hl-1-96"><a class="lnlinks" href="#hl-1-96"> 96</a>
</span><span class="lnt" id="hl-1-97"><a class="lnlinks" href="#hl-1-97"> 97</a>
</span><span class="lnt" id="hl-1-98"><a class="lnlinks" href="#hl-1-98"> 98</a>
</span><span class="lnt" id="hl-1-99"><a class="lnlinks" href="#hl-1-99"> 99</a>
</span><span class="lnt" id="hl-1-100"><a class="lnlinks" href="#hl-1-100">100</a>
</span><span class="lnt" id="hl-1-101"><a class="lnlinks" href="#hl-1-101">101</a>
</span><span class="lnt" id="hl-1-102"><a class="lnlinks" href="#hl-1-102">102</a>
</span><span class="lnt" id="hl-1-103"><a class="lnlinks" href="#hl-1-103">103</a>
</span><span class="lnt" id="hl-1-104"><a class="lnlinks" href="#hl-1-104">104</a>
</span><span class="lnt" id="hl-1-105"><a class="lnlinks" href="#hl-1-105">105</a>
</span><span class="lnt" id="hl-1-106"><a class="lnlinks" href="#hl-1-106">106</a>
</span><span class="lnt" id="hl-1-107"><a class="lnlinks" href="#hl-1-107">107</a>
</span><span class="lnt" id="hl-1-108"><a class="lnlinks" href="#hl-1-108">108</a>
</span><span class="lnt" id="hl-1-109"><a class="lnlinks" href="#hl-1-109">109</a>
</span><span class="lnt" id="hl-1-110"><a class="lnlinks" href="#hl-1-110">110</a>
</span><span class="lnt" id="hl-1-111"><a class="lnlinks" href="#hl-1-111">111</a>
</span><span class="lnt" id="hl-1-112"><a class="lnlinks" href="#hl-1-112">112</a>
</span><span class="lnt" id="hl-1-113"><a class="lnlinks" href="#hl-1-113">113</a>
</span><span class="lnt" id="hl-1-114"><a class="lnlinks" href="#hl-1-114">114</a>
</span><span class="lnt" id="hl-1-115"><a class="lnlinks" href="#hl-1-115">115</a>
</span><span class="lnt" id="hl-1-116"><a class="lnlinks" href="#hl-1-116">116</a>
</span><span class="lnt" id="hl-1-117"><a class="lnlinks" href="#hl-1-117">117</a>
</span><span class="lnt" id="hl-1-118"><a class="lnlinks" href="#hl-1-118">118</a>
</span><span class="lnt" id="hl-1-119"><a class="lnlinks" href="#hl-1-119">119</a>
</span><span class="lnt" id="hl-1-120"><a class="lnlinks" href="#hl-1-120">120</a>
</span><span class="lnt" id="hl-1-121"><a class="lnlinks" href="#hl-1-121">121</a>
</span><span class="lnt" id="hl-1-122"><a class="lnlinks" href="#hl-1-122">122</a>
</span><span class="lnt" id="hl-1-123"><a class="lnlinks" href="#hl-1-123">123</a>
</span><span class="lnt" id="hl-1-124"><a class="lnlinks" href="#hl-1-124">124</a>
</span><span class="lnt" id="hl-1-125"><a class="lnlinks" href="#hl-1-125">125</a>
</span><span class="lnt" id="hl-1-126"><a class="lnlinks" href="#hl-1-126">126</a>
</span><span class="lnt" id="hl-1-127"><a class="lnlinks" href="#hl-1-127">127</a>
</span><span class="lnt" id="hl-1-128"><a class="lnlinks" href="#hl-1-128">128</a>
</span><span class="lnt" id="hl-1-129"><a class="lnlinks" href="#hl-1-129">129</a>
</span><span class="lnt" id="hl-1-130"><a class="lnlinks" href="#hl-1-130">130</a>
</span><span class="lnt" id="hl-1-131"><a class="lnlinks" href="#hl-1-131">131</a>
</span><span class="lnt" id="hl-1-132"><a class="lnlinks" href="#hl-1-132">132</a>
</span><span class="lnt" id="hl-1-133"><a class="lnlinks" href="#hl-1-133">133</a>
</span><span class="lnt" id="hl-1-134"><a class="lnlinks" href="#hl-1-134">134</a>
</span><span class="lnt" id="hl-1-135"><a class="lnlinks" href="#hl-1-135">135</a>
</span><span class="lnt" id="hl-1-136"><a class="lnlinks" href="#hl-1-136">136</a>
</span><span class="lnt" id="hl-1-137"><a class="lnlinks" href="#hl-1-137">137</a>
</span><span class="lnt" id="hl-1-138"><a class="lnlinks" href="#hl-1-138">138</a>
</span><span class="lnt" id="hl-1-139"><a class="lnlinks" href="#hl-1-139">139</a>
</span><span class="lnt" id="hl-1-140"><a class="lnlinks" href="#hl-1-140">140</a>
</span><span class="lnt" id="hl-1-141"><a class="lnlinks" href="#hl-1-141">141</a>
</span><span class="lnt" id="hl-1-142"><a class="lnlinks" href="#hl-1-142">142</a>
</span><span class="lnt" id="hl-1-143"><a class="lnlinks" href="#hl-1-143">143</a>
</span><span class="lnt" id="hl-1-144"><a class="lnlinks" href="#hl-1-144">144</a>
</span><span class="lnt" id="hl-1-145"><a class="lnlinks" href="#hl-1-145">145</a>
</span><span class="lnt" id="hl-1-146"><a class="lnlinks" href="#hl-1-146">146</a>
</span><span class="lnt" id="hl-1-147"><a class="lnlinks" href="#hl-1-147">147</a>
</span><span class="lnt" id="hl-1-148"><a class="lnlinks" href="#hl-1-148">148</a>
</span><span class="lnt" id="hl-1-149"><a class="lnlinks" href="#hl-1-149">149</a>
</span><span class="lnt" id="hl-1-150"><a class="lnlinks" href="#hl-1-150">150</a>
</span><span class="lnt" id="hl-1-151"><a class="lnlinks" href="#hl-1-151">151</a>
</span><span class="lnt" id="hl-1-152"><a class="lnlinks" href="#hl-1-152">152</a>
</span><span class="lnt" id="hl-1-153"><a class="lnlinks" href="#hl-1-153">153</a>
</span><span class="lnt" id="hl-1-154"><a class="lnlinks" href="#hl-1-154">154</a>
</span><span class="lnt" id="hl-1-155"><a class="lnlinks" href="#hl-1-155">155</a>
</span><span class="lnt" id="hl-1-156"><a class="lnlinks" href="#hl-1-156">156</a>
</span><span class="lnt" id="hl-1-157"><a class="lnlinks" href="#hl-1-157">157</a>
</span><span class="lnt" id="hl-1-158"><a class="lnlinks" href="#hl-1-158">158</a>
</span><span class="lnt" id="hl-1-159"><a class="lnlinks" href="#hl-1-159">159</a>
</span><span class="lnt" id="hl-1-160"><a class="lnlinks" href="#hl-1-160">160</a>
</span><span class="lnt" id="hl-1-161"><a class="lnlinks" href="#hl-1-161">161</a>
</span><span class="lnt" id="hl-1-162"><a class="lnlinks" href="#hl-1-162">162</a>
</span><span class="lnt" id="hl-1-163"><a class="lnlinks" href="#hl-1-163">163</a>
</span><span class="lnt" id="hl-1-164"><a class="lnlinks" href="#hl-1-164">164</a>
</span><span class="lnt" id="hl-1-165"><a class="lnlinks" href="#hl-1-165">165</a>
</span><span class="lnt" id="hl-1-166"><a class="lnlinks" href="#hl-1-166">166</a>
</span><span class="lnt" id="hl-1-167"><a class="lnlinks" href="#hl-1-167">167</a>
</span><span class="lnt" id="hl-1-168"><a class="lnlinks" href="#hl-1-168">168</a>
</span><span class="lnt" id="hl-1-169"><a class="lnlinks" href="#hl-1-169">169</a>
</span><span class="lnt" id="hl-1-170"><a class="lnlinks" href="#hl-1-170">170</a>
</span><span class="lnt" id="hl-1-171"><a class="lnlinks" href="#hl-1-171">171</a>
</span><span class="lnt" id="hl-1-172"><a class="lnlinks" href="#hl-1-172">172</a>
</span><span class="lnt" id="hl-1-173"><a class="lnlinks" href="#hl-1-173">173</a>
</span><span class="lnt" id="hl-1-174"><a class="lnlinks" href="#hl-1-174">174</a>
</span><span class="lnt" id="hl-1-175"><a class="lnlinks" href="#hl-1-175">175</a>
</span><span class="lnt" id="hl-1-176"><a class="lnlinks" href="#hl-1-176">176</a>
</span><span class="lnt" id="hl-1-177"><a class="lnlinks" href="#hl-1-177">177</a>
</span><span class="lnt" id="hl-1-178"><a class="lnlinks" href="#hl-1-178">178</a>
</span><span class="lnt" id="hl-1-179"><a class="lnlinks" href="#hl-1-179">179</a>
</span><span class="lnt" id="hl-1-180"><a class="lnlinks" href="#hl-1-180">180</a>
</span><span class="lnt" id="hl-1-181"><a class="lnlinks" href="#hl-1-181">181</a>
</span><span class="lnt" id="hl-1-182"><a class="lnlinks" href="#hl-1-182">182</a>
</span><span class="lnt" id="hl-1-183"><a class="lnlinks" href="#hl-1-183">183</a>
</span><span class="lnt" id="hl-1-184"><a class="lnlinks" href="#hl-1-184">184</a>
</span><span class="lnt" id="hl-1-185"><a class="lnlinks" href="#hl-1-185">185</a>
</span><span class="lnt" id="hl-1-186"><a class="lnlinks" href="#hl-1-186">186</a>
</span><span class="lnt" id="hl-1-187"><a class="lnlinks" href="#hl-1-187">187</a>
</span><span class="lnt" id="hl-1-188"><a class="lnlinks" href="#hl-1-188">188</a>
</span><span class="lnt" id="hl-1-189"><a class="lnlinks" href="#hl-1-189">189</a>
</span><span class="lnt" id="hl-1-190"><a class="lnlinks" href="#hl-1-190">190</a>
</span><span class="lnt" id="hl-1-191"><a class="lnlinks" href="#hl-1-191">191</a>
</span><span class="lnt" id="hl-1-192"><a class="lnlinks" href="#hl-1-192">192</a>
</span><span class="lnt" id="hl-1-193"><a class="lnlinks" href="#hl-1-193">193</a>
</span><span class="lnt" id="hl-1-194"><a class="lnlinks" href="#hl-1-194">194</a>
</span><span class="lnt" id="hl-1-195"><a class="lnlinks" href="#hl-1-195">195</a>
</span><span class="lnt" id="hl-1-196"><a class="lnlinks" href="#hl-1-196">196</a>
</span><span class="lnt" id="hl-1-197"><a class="lnlinks" href="#hl-1-197">197</a>
</span><span class="lnt" id="hl-1-198"><a class="lnlinks" href="#hl-1-198">198</a>
</span><span class="lnt" id="hl-1-199"><a class="lnlinks" href="#hl-1-199">199</a>
</span><span class="lnt" id="hl-1-200"><a class="lnlinks" href="#hl-1-200">200</a>
</span><span class="lnt" id="hl-1-201"><a class="lnlinks" href="#hl-1-201">201</a>
</span><span class="lnt" id="hl-1-202"><a class="lnlinks" href="#hl-1-202">202</a>
</span><span class="lnt" id="hl-1-203"><a class="lnlinks" href="#hl-1-203">203</a>
</span><span class="lnt" id="hl-1-204"><a class="lnlinks" href="#hl-1-204">204</a>
</span><span class="lnt" id="hl-1-205"><a class="lnlinks" href="#hl-1-205">205</a>
</span><span class="lnt" id="hl-1-206"><a class="lnlinks" href="#hl-1-206">206</a>
</span><span class="lnt" id="hl-1-207"><a class="lnlinks" href="#hl-1-207">207</a>
</span><span class="lnt" id="hl-1-208"><a class="lnlinks" href="#hl-1-208">208</a>
</span><span class="lnt" id="hl-1-209"><a class="lnlinks" href="#hl-1-209">209</a>
</span><span class="lnt" id="hl-1-210"><a class="lnlinks" href="#hl-1-210">210</a>
</span><span class="lnt" id="hl-1-211"><a class="lnlinks" href="#hl-1-211">211</a>
</span><span class="lnt" id="hl-1-212"><a class="lnlinks" href="#hl-1-212">212</a>
</span><span class="lnt" id="hl-1-213"><a class="lnlinks" href="#hl-1-213">213</a>
</span><span class="lnt" id="hl-1-214"><a class="lnlinks" href="#hl-1-214">214</a>
</span><span class="lnt" id="hl-1-215"><a class="lnlinks" href="#hl-1-215">215</a>
</span><span class="lnt" id="hl-1-216"><a class="lnlinks" href="#hl-1-216">216</a>
</span><span class="lnt" id="hl-1-217"><a class="lnlinks" href="#hl-1-217">217</a>
</span><span class="lnt" id="hl-1-218"><a class="lnlinks" href="#hl-1-218">218</a>
</span><span class="lnt" id="hl-1-219"><a class="lnlinks" href="#hl-1-219">219</a>
</span><span class="lnt" id="hl-1-220"><a class="lnlinks" href="#hl-1-220">220</a>
</span><span class="lnt" id="hl-1-221"><a class="lnlinks" href="#hl-1-221">221</a>
</span><span class="lnt" id="hl-1-222"><a class="lnlinks" href="#hl-1-222">222</a>
</span><span class="lnt" id="hl-1-223"><a class="lnlinks" href="#hl-1-223">223</a>
</span><span class="lnt" id="hl-1-224"><a class="lnlinks" href="#hl-1-224">224</a>
</span><span class="lnt" id="hl-1-225"><a class="lnlinks" href="#hl-1-225">225</a>
</span><span class="lnt" id="hl-1-226"><a class="lnlinks" href="#hl-1-226">226</a>
</span><span class="lnt" id="hl-1-227"><a class="lnlinks" href="#hl-1-227">227</a>
</span><span class="lnt" id="hl-1-228"><a class="lnlinks" href="#hl-1-228">228</a>
</span><span class="lnt" id="hl-1-229"><a class="lnlinks" href="#hl-1-229">229</a>
</span><span class="lnt" id="hl-1-230"><a class="lnlinks" href="#hl-1-230">230</a>
</span><span class="lnt" id="hl-1-231"><a class="lnlinks" href="#hl-1-231">231</a>
</span><span class="lnt" id="hl-1-232"><a class="lnlinks" href="#hl-1-232">232</a>
</span><span class="lnt" id="hl-1-233"><a class="lnlinks" href="#hl-1-233">233</a>
</span><span class="lnt" id="hl-1-234"><a class="lnlinks" href="#hl-1-234">234</a>
</span><span class="lnt" id="hl-1-235"><a class="lnlinks" href="#hl-1-235">235</a>
</span><span class="lnt" id="hl-1-236"><a class="lnlinks" href="#hl-1-236">236</a>
</span><span class="lnt" id="hl-1-237"><a class="lnlinks" href="#hl-1-237">237</a>
</span><span class="lnt" id="hl-1-238"><a class="lnlinks" href="#hl-1-238">238</a>
</span><span class="lnt" id="hl-1-239"><a class="lnlinks" href="#hl-1-239">239</a>
</span><span class="lnt" id="hl-1-240"><a class="lnlinks" href="#hl-1-240">240</a>
</span><span class="lnt" id="hl-1-241"><a class="lnlinks" href="#hl-1-241">241</a>
</span><span class="lnt" id="hl-1-242"><a class="lnlinks" href="#hl-1-242">242</a>
</span><span class="lnt" id="hl-1-243"><a class="lnlinks" href="#hl-1-243">243</a>
</span><span class="lnt" id="hl-1-244"><a class="lnlinks" href="#hl-1-244">244</a>
</span><span class="lnt" id="hl-1-245"><a class="lnlinks" href="#hl-1-245">245</a>
</span><span class="lnt" id="hl-1-246"><a class="lnlinks" href="#hl-1-246">246</a>
</span><span class="lnt" id="hl-1-247"><a class="lnlinks" href="#hl-1-247">247</a>
</span><span class="lnt" id="hl-1-248"><a class="lnlinks" href="#hl-1-248">248</a>
</span><span class="lnt" id="hl-1-249"><a class="lnlinks" href="#hl-1-249">249</a>
</span><span class="lnt" id="hl-1-250"><a class="lnlinks" href="#hl-1-250">250</a>
</span><span class="lnt" id="hl-1-251"><a class="lnlinks" href="#hl-1-251">251</a>
</span><span class="lnt" id="hl-1-252"><a class="lnlinks" href="#hl-1-252">252</a>
</span><span class="lnt" id="hl-1-253"><a class="lnlinks" href="#hl-1-253">253</a>
</span><span class="lnt" id="hl-1-254"><a class="lnlinks" href="#hl-1-254">254</a>
</span><span class="lnt" id="hl-1-255"><a class="lnlinks" href="#hl-1-255">255</a>
</span><span class="lnt" id="hl-1-256"><a class="lnlinks" href="#hl-1-256">256</a>
</span><span class="lnt" id="hl-1-257"><a class="lnlinks" href="#hl-1-257">257</a>
</span><span class="lnt" id="hl-1-258"><a class="lnlinks" href="#hl-1-258">258</a>
</span><span class="lnt" id="hl-1-259"><a class="lnlinks" href="#hl-1-259">259</a>
</span><span class="lnt" id="hl-1-260"><a class="lnlinks" href="#hl-1-260">260</a>
</span><span class="lnt" id="hl-1-261"><a class="lnlinks" href="#hl-1-261">261</a>
</span><span class="lnt" id="hl-1-262"><a class="lnlinks" href="#hl-1-262">262</a>
</span><span class="lnt" id="hl-1-263"><a class="lnlinks" href="#hl-1-263">263</a>
</span><span class="lnt" id="hl-1-264"><a class="lnlinks" href="#hl-1-264">264</a>
</span><span class="lnt" id="hl-1-265"><a class="lnlinks" href="#hl-1-265">265</a>
</span><span class="lnt" id="hl-1-266"><a class="lnlinks" href="#hl-1-266">266</a>
</span><span class="lnt" id="hl-1-267"><a class="lnlinks" href="#hl-1-267">267</a>
</span><span class="lnt" id="hl-1-268"><a class="lnlinks" href="#hl-1-268">268</a>
</span><span class="lnt" id="hl-1-269"><a class="lnlinks" href="#hl-1-269">269</a>
</span><span class="lnt" id="hl-1-270"><a class="lnlinks" href="#hl-1-270">270</a>
</span><span class="lnt" id="hl-1-271"><a class="lnlinks" href="#hl-1-271">271</a>
</span><span class="lnt" id="hl-1-272"><a class="lnlinks" href="#hl-1-272">272</a>
</span><span class="lnt" id="hl-1-273"><a class="lnlinks" href="#hl-1-273">273</a>
</span><span class="lnt" id="hl-1-274"><a class="lnlinks" href="#hl-1-274">274</a>
</span><span class="lnt" id="hl-1-275"><a class="lnlinks" href="#hl-1-275">275</a>
</span><span class="lnt" id="hl-1-276"><a class="lnlinks" href="#hl-1-276">276</a>
</span><span class="lnt" id="hl-1-277"><a class="lnlinks" href="#hl-1-277">277</a>
</span><span class="lnt" id="hl-1-278"><a class="lnlinks" href="#hl-1-278">278</a>
</span><span class="lnt" id="hl-1-279"><a class="lnlinks" href="#hl-1-279">279</a>
</span><span class="lnt" id="hl-1-280"><a class="lnlinks" href="#hl-1-280">280</a>
</span><span class="lnt" id="hl-1-281"><a class="lnlinks" href="#hl-1-281">281</a>
</span><span class="lnt" id="hl-1-282"><a class="lnlinks" href="#hl-1-282">282</a>
</span><span class="lnt" id="hl-1-283"><a class="lnlinks" href="#hl-1-283">283</a>
</span><span class="lnt" id="hl-1-284"><a class="lnlinks" href="#hl-1-284">284</a>
</span><span class="lnt" id="hl-1-285"><a class="lnlinks" href="#hl-1-285">285</a>
</span><span class="lnt" id="hl-1-286"><a class="lnlinks" href="#hl-1-286">286</a>
</span><span class="lnt" id="hl-1-287"><a class="lnlinks" href="#hl-1-287">287</a>
</span><span class="lnt" id="hl-1-288"><a class="lnlinks" href="#hl-1-288">288</a>
</span><span class="lnt" id="hl-1-289"><a class="lnlinks" href="#hl-1-289">289</a>
</span><span class="lnt" id="hl-1-290"><a class="lnlinks" href="#hl-1-290">290</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="s2">&#34;use client&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="nx">React</span> <span class="kr">from</span> <span class="s2">&#34;react&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useCallback</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;react&#34;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Card</span><span class="p">,</span> <span class="nx">CardContent</span><span class="p">,</span> <span class="nx">CardHeader</span><span class="p">,</span> <span class="nx">CardTitle</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/components/ui/card&#34;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Button</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/components/ui/button&#34;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Progress</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/components/ui/progress&#34;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Alert</span><span class="p">,</span> <span class="nx">AlertDescription</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/components/ui/alert&#34;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Badge</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/components/ui/badge&#34;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Upload</span><span class="p">,</span> <span class="nx">Download</span><span class="p">,</span> <span class="nx">FileText</span><span class="p">,</span> <span class="nx">Folder</span><span class="p">,</span> <span class="nx">AlertCircle</span><span class="p">,</span> <span class="nx">CheckCircle2</span><span class="p">,</span> <span class="nx">X</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;lucide-react&#34;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">useToast</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/hooks/use-toast&#34;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">JSZip</span> <span class="kr">from</span> <span class="s2">&#34;jszip&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">ProcessedFile</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span>: <span class="kt">string</span>
</span></span><span class="line"><span class="cl">  <span class="nx">content</span>: <span class="kt">string</span><span class="p">[]</span>
</span></span><span class="line"><span class="cl">  <span class="nx">status</span><span class="o">:</span> <span class="s2">&#34;pending&#34;</span> <span class="o">|</span> <span class="s2">&#34;processing&#34;</span> <span class="o">|</span> <span class="s2">&#34;completed&#34;</span> <span class="o">|</span> <span class="s2">&#34;error&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">error?</span>: <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">FolderGenerator() {</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">files</span><span class="p">,</span> <span class="nx">setFiles</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">&lt;</span><span class="nt">ProcessedFile</span><span class="err">[]</span><span class="p">&gt;([])</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">isProcessing</span><span class="p">,</span> <span class="nx">setIsProcessing</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">progress</span><span class="p">,</span> <span class="nx">setProgress</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">toast</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useToast</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">handleFileUpload</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nx">event</span>: <span class="kt">React.ChangeEvent</span><span class="p">&lt;</span><span class="nt">HTMLInputElement</span><span class="p">&gt;)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">uploadedFiles</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">files</span> <span class="o">||</span> <span class="p">[])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">uploadedFiles</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">newFiles</span>: <span class="kt">ProcessedFile</span><span class="p">[]</span> <span class="o">=</span> <span class="nx">uploadedFiles</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">file</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span>: <span class="kt">file.name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">content</span><span class="o">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">        <span class="nx">status</span><span class="o">:</span> <span class="s2">&#34;pending&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">}))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nx">setFiles</span><span class="p">((</span><span class="nx">prev</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">[...</span><span class="nx">prev</span><span class="p">,</span> <span class="p">...</span><span class="nx">newFiles</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nx">uploadedFiles</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">file</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="nx">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FileReader</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="nx">reader</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kr">const</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="o">?</span><span class="p">.</span><span class="nx">result</span> <span class="kr">as</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">            <span class="kr">const</span> <span class="nx">lines</span> <span class="o">=</span> <span class="nx">content</span>
</span></span><span class="line"><span class="cl">              <span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\r?\n/</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">              <span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">line</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">line</span><span class="p">.</span><span class="nx">trim</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">              <span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">line</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">line</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">              <span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">line</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="sr">/^[\u4e00-\u9fa5a-zA-Z0-9\s\-_()（）]+$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">line</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nx">setFiles</span><span class="p">((</span><span class="nx">prev</span><span class="p">)</span> <span class="o">=&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="nx">prev</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">f</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nx">i</span> <span class="o">===</span> <span class="nx">prev</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">uploadedFiles</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="nx">index</span>
</span></span><span class="line"><span class="cl">                  <span class="o">?</span> <span class="p">{</span> <span class="p">...</span><span class="nx">f</span><span class="p">,</span> <span class="nx">content</span>: <span class="kt">lines</span><span class="p">,</span> <span class="nx">status</span><span class="o">:</span> <span class="s2">&#34;completed&#34;</span> <span class="kr">as</span> <span class="kr">const</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">                  <span class="o">:</span> <span class="nx">f</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nx">toast</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">              <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;解析成功&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nx">description</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">file</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb"> 共 </span><span class="si">${</span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span><span class="sb"> 个有效名称`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">setFiles</span><span class="p">((</span><span class="nx">prev</span><span class="p">)</span> <span class="o">=&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="nx">prev</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">f</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nx">i</span> <span class="o">===</span> <span class="nx">prev</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">uploadedFiles</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="nx">index</span>
</span></span><span class="line"><span class="cl">                  <span class="o">?</span> <span class="p">{</span> <span class="p">...</span><span class="nx">f</span><span class="p">,</span> <span class="nx">status</span><span class="o">:</span> <span class="s2">&#34;error&#34;</span> <span class="kr">as</span> <span class="kr">const</span><span class="p">,</span> <span class="nx">error</span><span class="o">:</span> <span class="s2">&#34;解析失败&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">                  <span class="o">:</span> <span class="nx">f</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nx">toast</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">              <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;解析失败&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nx">description</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">file</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb"> 解析错误`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nx">variant</span><span class="o">:</span> <span class="s2">&#34;destructive&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nx">reader</span><span class="p">.</span><span class="nx">readAsText</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="s2">&#34;utf-8&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span><span class="nx">toast</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">removeFile</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">index</span>: <span class="kt">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">setFiles</span><span class="p">((</span><span class="nx">prev</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">prev</span><span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">_</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">i</span> <span class="o">!==</span> <span class="nx">index</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">generateZip</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(</span><span class="kr">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">validFiles</span> <span class="o">=</span> <span class="nx">files</span><span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">f</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">f</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="s2">&#34;completed&#34;</span> <span class="o">&amp;&amp;</span> <span class="nx">f</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">validFiles</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">toast</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;无有效文件&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">description</span><span class="o">:</span> <span class="s2">&#34;请上传有效文本文件&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">variant</span><span class="o">:</span> <span class="s2">&#34;destructive&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">setIsProcessing</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">setProgress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">zip</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">JSZip</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="kd">let</span> <span class="nx">totalItems</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">      <span class="kd">let</span> <span class="nx">processedItems</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nx">validFiles</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">file</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">totalItems</span> <span class="o">+=</span> <span class="nx">file</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">length</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">file</span> <span class="k">of</span> <span class="nx">validFiles</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="nx">baseName</span> <span class="o">=</span> <span class="nx">file</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\.[^/.]+$/</span><span class="p">,</span> <span class="s2">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="nx">fileFolder</span> <span class="o">=</span> <span class="nx">zip</span><span class="p">.</span><span class="nx">folder</span><span class="p">(</span><span class="nx">baseName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">fileFolder</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">name</span> <span class="k">of</span> <span class="nx">file</span><span class="p">.</span><span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kr">const</span> <span class="nx">folderName</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[&lt;&gt;:&#34;/\\|?*]/g</span><span class="p">,</span> <span class="s2">&#34;_&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="kr">const</span> <span class="nx">nameFolder</span> <span class="o">=</span> <span class="nx">fileFolder</span><span class="p">.</span><span class="nx">folder</span><span class="p">(</span><span class="nx">folderName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="nx">nameFolder</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">nameFolder</span><span class="p">.</span><span class="nx">file</span><span class="p">(</span><span class="s2">&#34;README.txt&#34;</span><span class="p">,</span> <span class="sb">`文件夹: </span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="err">\</span><span class="sb">n创建时间: </span><span class="si">${</span><span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">toLocaleString</span><span class="p">(</span><span class="s2">&#34;zh-CN&#34;</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nx">processedItems</span><span class="o">++</span>
</span></span><span class="line"><span class="cl">            <span class="nx">setProgress</span><span class="p">((</span><span class="nx">processedItems</span> <span class="o">/</span> <span class="nx">totalItems</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">await</span> <span class="k">new</span> <span class="nx">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">content</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">zip</span><span class="p">.</span><span class="nx">generateAsync</span><span class="p">({</span> <span class="kr">type</span><span class="o">:</span> <span class="s2">&#34;blob&#34;</span> <span class="p">})</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">URL</span><span class="p">.</span><span class="nx">createObjectURL</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nx">a</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">url</span>
</span></span><span class="line"><span class="cl">      <span class="nx">a</span><span class="p">.</span><span class="nx">download</span> <span class="o">=</span> <span class="sb">`folders_</span><span class="si">${</span><span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">().</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span><span class="si">}</span><span class="sb">.zip`</span>
</span></span><span class="line"><span class="cl">      <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nx">a</span><span class="p">.</span><span class="nx">click</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nx">URL</span><span class="p">.</span><span class="nx">revokeObjectURL</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nx">toast</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;生成成功&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">description</span><span class="o">:</span> <span class="sb">`已生成 </span><span class="si">${</span><span class="nx">totalItems</span><span class="si">}</span><span class="sb"> 个文件夹`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">toast</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;生成失败&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">description</span><span class="o">:</span> <span class="s2">&#34;ZIP文件生成错误&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">variant</span><span class="o">:</span> <span class="s2">&#34;destructive&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setIsProcessing</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setProgress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[</span><span class="nx">files</span><span class="p">,</span> <span class="nx">toast</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">totalFolders</span> <span class="o">=</span> <span class="nx">files</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">sum</span><span class="p">,</span> <span class="nx">file</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">sum</span> <span class="o">+</span> <span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">content</span><span class="o">?</span><span class="p">.</span><span class="nx">length</span> <span class="o">||</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;min-h-screen bg-white dark:bg-gray-900&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;container mx-auto px-6 py-12 max-w-3xl&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-center mb-12&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-4xl font-bold text-gray-900 dark:text-white mb-3 tracking-tight&#34;</span><span class="p">&gt;</span><span class="err">文件夹生成器</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-gray-600 dark:text-gray-400 text-lg&#34;</span><span class="p">&gt;</span><span class="err">批量生成文件夹结构</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Card</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;mb-8 border-2&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">CardContent</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;pt-8&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-gray-400 transition-colors&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">input</span>
</span></span><span class="line"><span class="cl">                <span class="na">type</span><span class="o">=</span><span class="s">&#34;file&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="na">multiple</span>
</span></span><span class="line"><span class="cl">                <span class="na">accept</span><span class="o">=</span><span class="s">&#34;.txt,.csv,.text&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="na">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">handleFileUpload</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="na">className</span><span class="o">=</span><span class="s">&#34;hidden&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="na">id</span><span class="o">=</span><span class="s">&#34;file-upload&#34;</span>
</span></span><span class="line"><span class="cl">              <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">label</span> <span class="na">htmlFor</span><span class="o">=</span><span class="s">&#34;file-upload&#34;</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;cursor-pointer&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">Upload</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;h-12 w-12 text-gray-400 mx-auto mb-4&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;font-semibold text-gray-700 dark:text-gray-300 mb-2 text-lg&#34;</span><span class="p">&gt;</span><span class="err">选择文件</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-gray-500 dark:text-gray-400&#34;</span><span class="p">&gt;</span><span class="err">支持</span> <span class="p">.</span><span class="nx">txt</span><span class="p">,</span> <span class="p">.</span><span class="nx">csv</span> <span class="err">格式</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">CardContent</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">Card</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">files</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">Card</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;mb-8 border-2&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">CardHeader</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;pb-4&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;flex items-center justify-between&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">CardTitle</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-xl font-bold&#34;</span><span class="p">&gt;</span><span class="err">文件列表</span> <span class="p">({</span><span class="nx">files</span><span class="p">.</span><span class="nx">length</span><span class="p">})&lt;/</span><span class="nt">CardTitle</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">Badge</span> <span class="na">variant</span><span class="o">=</span><span class="s">&#34;secondary&#34;</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-sm px-3 py-1&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">{</span><span class="nx">totalFolders</span><span class="p">}</span> <span class="err">个文件夹</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">Badge</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">CardHeader</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">CardContent</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;space-y-4&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">{</span><span class="nx">files</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">file</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;space-y-3&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;flex items-center gap-3&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                      <span class="p">{</span><span class="nx">file</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="s2">&#34;completed&#34;</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="nt">CheckCircle2</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;h-5 w-5 text-green-600&#34;</span> <span class="p">/&gt;}</span>
</span></span><span class="line"><span class="cl">                      <span class="p">{</span><span class="nx">file</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="s2">&#34;error&#34;</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="nt">AlertCircle</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;h-5 w-5 text-red-600&#34;</span> <span class="p">/&gt;}</span>
</span></span><span class="line"><span class="cl">                      <span class="p">{</span><span class="nx">file</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="s2">&#34;pending&#34;</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="nt">FileText</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;h-5 w-5 text-gray-400&#34;</span> <span class="p">/&gt;}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                      <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;font-semibold&#34;</span><span class="p">&gt;{</span><span class="nx">file</span><span class="p">.</span><span class="nx">name</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span><span class="nx">file</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="s2">&#34;completed&#34;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">                          <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-sm text-gray-600 dark:text-gray-400&#34;</span><span class="p">&gt;{</span><span class="nx">file</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span> <span class="err">个名称</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">)}</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span><span class="nx">file</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="s2">&#34;error&#34;</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-sm text-red-600&#34;</span><span class="p">&gt;{</span><span class="nx">file</span><span class="p">.</span><span class="nx">error</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;}</span>
</span></span><span class="line"><span class="cl">                      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">Button</span> <span class="na">variant</span><span class="o">=</span><span class="s">&#34;ghost&#34;</span> <span class="na">size</span><span class="o">=</span><span class="s">&#34;sm&#34;</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">removeFile</span><span class="p">(</span><span class="nx">index</span><span class="p">)}&gt;</span>
</span></span><span class="line"><span class="cl">                      <span class="p">&lt;</span><span class="nt">X</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;h-4 w-4&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                  <span class="p">{</span><span class="nx">file</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="s2">&#34;completed&#34;</span> <span class="o">&amp;&amp;</span> <span class="nx">file</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;ml-6 p-4 bg-gray-100 dark:bg-gray-700 rounded-lg border&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;font-semibold mb-3 text-gray-700 dark:text-gray-300&#34;</span><span class="p">&gt;</span><span class="err">预览内容</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;h-32 overflow-y-auto space-y-2&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span><span class="nx">file</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">).</span><span class="nx">map</span><span class="p">((</span><span class="nx">name</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">                          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">i</span><span class="p">}</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;flex items-center gap-2 text-gray-600 dark:text-gray-400&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="p">&lt;</span><span class="nt">Folder</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;h-4 w-4&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;{</span><span class="nx">name</span><span class="p">}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">))}</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span><span class="nx">file</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">20</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">                          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-gray-500 italic mt-2&#34;</span><span class="p">&gt;...</span> <span class="err">还有</span> <span class="p">{</span><span class="nx">file</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">20</span><span class="p">}</span> <span class="err">个</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">)}</span>
</span></span><span class="line"><span class="cl">                      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">)}</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">))}</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">CardContent</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">Card</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">)}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">files</span><span class="p">.</span><span class="nx">some</span><span class="p">((</span><span class="nx">f</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">f</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="s2">&#34;completed&#34;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">Card</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;mb-8 border-2&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">CardContent</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;pt-8&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">{</span><span class="nx">isProcessing</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;space-y-3 mb-6&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;flex justify-between font-semibold&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="err">生成中</span><span class="p">...&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;{</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">progress</span><span class="p">)}</span><span class="o">%</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">Progress</span> <span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">progress</span><span class="p">}</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;w-full h-3&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">)}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">Button</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">generateZip</span><span class="p">}</span> <span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">isProcessing</span><span class="p">}</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;w-full h-12 text-lg font-semibold&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">Download</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;h-5 w-5 mr-2&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span><span class="nx">isProcessing</span> <span class="o">?</span> <span class="s2">&#34;生成中...&#34;</span> <span class="o">:</span> <span class="s2">&#34;下载ZIP文件&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">CardContent</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">Card</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">)}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Alert</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;border-2&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">AlertCircle</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;h-5 w-5&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">AlertDescription</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-base&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="err">支持</span> <span class="p">.</span><span class="nx">txt</span><span class="o">/</span><span class="p">.</span><span class="nx">csv</span> <span class="err">文件，每行一个名称。本地处理，保护隐私。</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">AlertDescription</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">Alert</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-center mt-12 pt-8 border-t border-gray-200 dark:border-gray-700&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-sm text-gray-500 dark:text-gray-400&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">by</span><span class="p">{</span><span class="s2">&#34; &#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">a</span>
</span></span><span class="line"><span class="cl">              <span class="na">href</span><span class="o">=</span><span class="s">&#34;https://itxiaozhang.com&#34;</span>
</span></span><span class="line"><span class="cl">              <span class="na">target</span><span class="o">=</span><span class="s">&#34;_blank&#34;</span>
</span></span><span class="line"><span class="cl">              <span class="na">rel</span><span class="o">=</span><span class="s">&#34;noopener noreferrer&#34;</span>
</span></span><span class="line"><span class="cl">              <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100 transition-colors&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="nx">IT小章</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="方法三本地-python-脚本">方法三：本地 Python 脚本<a hidden class="anchor" aria-hidden="true" href="#方法三本地-python-脚本">#</a></h2>
<h3 id="优势">优势<a hidden class="anchor" aria-hidden="true" href="#优势">#</a></h3>
<ul>
<li><strong>本地运行</strong>：无需联网，速度快。</li>
<li><strong>功能丰富</strong>：支持去重、重命名、日志。</li>
<li><strong>高度可定制</strong>：可随需修改。</li>
<li><strong>多编码兼容</strong>：<code>guess_read_text</code> 支持多种常见编码。</li>
<li><strong>文件名清洗</strong>：非法字符、Windows 保留名、长度限制等都处理到位。</li>
<li><strong>并发执行</strong>：<code>ThreadPoolExecutor</code> 加速文件夹创建。</li>
<li><strong>参数灵活</strong>：支持 <code>--exist</code> 策略、重命名模板、最大长度、dry-run。</li>
</ul>
<h3 id="使用方法">使用方法<a hidden class="anchor" aria-hidden="true" href="#使用方法">#</a></h3>
<ol>
<li>新建 <code>name.txt</code>，每行一个文件夹名称。</li>
<li>保存脚本为 <code>create_dirs.py</code>。</li>
<li>运行命令：</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-2-1"><a class="lnlinks" href="#hl-2-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">python create_dirs.py
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="全部代码">全部代码<a hidden class="anchor" aria-hidden="true" href="#全部代码">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-3-1"><a class="lnlinks" href="#hl-3-1">  1</a>
</span><span class="lnt" id="hl-3-2"><a class="lnlinks" href="#hl-3-2">  2</a>
</span><span class="lnt" id="hl-3-3"><a class="lnlinks" href="#hl-3-3">  3</a>
</span><span class="lnt" id="hl-3-4"><a class="lnlinks" href="#hl-3-4">  4</a>
</span><span class="lnt" id="hl-3-5"><a class="lnlinks" href="#hl-3-5">  5</a>
</span><span class="lnt" id="hl-3-6"><a class="lnlinks" href="#hl-3-6">  6</a>
</span><span class="lnt" id="hl-3-7"><a class="lnlinks" href="#hl-3-7">  7</a>
</span><span class="lnt" id="hl-3-8"><a class="lnlinks" href="#hl-3-8">  8</a>
</span><span class="lnt" id="hl-3-9"><a class="lnlinks" href="#hl-3-9">  9</a>
</span><span class="lnt" id="hl-3-10"><a class="lnlinks" href="#hl-3-10"> 10</a>
</span><span class="lnt" id="hl-3-11"><a class="lnlinks" href="#hl-3-11"> 11</a>
</span><span class="lnt" id="hl-3-12"><a class="lnlinks" href="#hl-3-12"> 12</a>
</span><span class="lnt" id="hl-3-13"><a class="lnlinks" href="#hl-3-13"> 13</a>
</span><span class="lnt" id="hl-3-14"><a class="lnlinks" href="#hl-3-14"> 14</a>
</span><span class="lnt" id="hl-3-15"><a class="lnlinks" href="#hl-3-15"> 15</a>
</span><span class="lnt" id="hl-3-16"><a class="lnlinks" href="#hl-3-16"> 16</a>
</span><span class="lnt" id="hl-3-17"><a class="lnlinks" href="#hl-3-17"> 17</a>
</span><span class="lnt" id="hl-3-18"><a class="lnlinks" href="#hl-3-18"> 18</a>
</span><span class="lnt" id="hl-3-19"><a class="lnlinks" href="#hl-3-19"> 19</a>
</span><span class="lnt" id="hl-3-20"><a class="lnlinks" href="#hl-3-20"> 20</a>
</span><span class="lnt" id="hl-3-21"><a class="lnlinks" href="#hl-3-21"> 21</a>
</span><span class="lnt" id="hl-3-22"><a class="lnlinks" href="#hl-3-22"> 22</a>
</span><span class="lnt" id="hl-3-23"><a class="lnlinks" href="#hl-3-23"> 23</a>
</span><span class="lnt" id="hl-3-24"><a class="lnlinks" href="#hl-3-24"> 24</a>
</span><span class="lnt" id="hl-3-25"><a class="lnlinks" href="#hl-3-25"> 25</a>
</span><span class="lnt" id="hl-3-26"><a class="lnlinks" href="#hl-3-26"> 26</a>
</span><span class="lnt" id="hl-3-27"><a class="lnlinks" href="#hl-3-27"> 27</a>
</span><span class="lnt" id="hl-3-28"><a class="lnlinks" href="#hl-3-28"> 28</a>
</span><span class="lnt" id="hl-3-29"><a class="lnlinks" href="#hl-3-29"> 29</a>
</span><span class="lnt" id="hl-3-30"><a class="lnlinks" href="#hl-3-30"> 30</a>
</span><span class="lnt" id="hl-3-31"><a class="lnlinks" href="#hl-3-31"> 31</a>
</span><span class="lnt" id="hl-3-32"><a class="lnlinks" href="#hl-3-32"> 32</a>
</span><span class="lnt" id="hl-3-33"><a class="lnlinks" href="#hl-3-33"> 33</a>
</span><span class="lnt" id="hl-3-34"><a class="lnlinks" href="#hl-3-34"> 34</a>
</span><span class="lnt" id="hl-3-35"><a class="lnlinks" href="#hl-3-35"> 35</a>
</span><span class="lnt" id="hl-3-36"><a class="lnlinks" href="#hl-3-36"> 36</a>
</span><span class="lnt" id="hl-3-37"><a class="lnlinks" href="#hl-3-37"> 37</a>
</span><span class="lnt" id="hl-3-38"><a class="lnlinks" href="#hl-3-38"> 38</a>
</span><span class="lnt" id="hl-3-39"><a class="lnlinks" href="#hl-3-39"> 39</a>
</span><span class="lnt" id="hl-3-40"><a class="lnlinks" href="#hl-3-40"> 40</a>
</span><span class="lnt" id="hl-3-41"><a class="lnlinks" href="#hl-3-41"> 41</a>
</span><span class="lnt" id="hl-3-42"><a class="lnlinks" href="#hl-3-42"> 42</a>
</span><span class="lnt" id="hl-3-43"><a class="lnlinks" href="#hl-3-43"> 43</a>
</span><span class="lnt" id="hl-3-44"><a class="lnlinks" href="#hl-3-44"> 44</a>
</span><span class="lnt" id="hl-3-45"><a class="lnlinks" href="#hl-3-45"> 45</a>
</span><span class="lnt" id="hl-3-46"><a class="lnlinks" href="#hl-3-46"> 46</a>
</span><span class="lnt" id="hl-3-47"><a class="lnlinks" href="#hl-3-47"> 47</a>
</span><span class="lnt" id="hl-3-48"><a class="lnlinks" href="#hl-3-48"> 48</a>
</span><span class="lnt" id="hl-3-49"><a class="lnlinks" href="#hl-3-49"> 49</a>
</span><span class="lnt" id="hl-3-50"><a class="lnlinks" href="#hl-3-50"> 50</a>
</span><span class="lnt" id="hl-3-51"><a class="lnlinks" href="#hl-3-51"> 51</a>
</span><span class="lnt" id="hl-3-52"><a class="lnlinks" href="#hl-3-52"> 52</a>
</span><span class="lnt" id="hl-3-53"><a class="lnlinks" href="#hl-3-53"> 53</a>
</span><span class="lnt" id="hl-3-54"><a class="lnlinks" href="#hl-3-54"> 54</a>
</span><span class="lnt" id="hl-3-55"><a class="lnlinks" href="#hl-3-55"> 55</a>
</span><span class="lnt" id="hl-3-56"><a class="lnlinks" href="#hl-3-56"> 56</a>
</span><span class="lnt" id="hl-3-57"><a class="lnlinks" href="#hl-3-57"> 57</a>
</span><span class="lnt" id="hl-3-58"><a class="lnlinks" href="#hl-3-58"> 58</a>
</span><span class="lnt" id="hl-3-59"><a class="lnlinks" href="#hl-3-59"> 59</a>
</span><span class="lnt" id="hl-3-60"><a class="lnlinks" href="#hl-3-60"> 60</a>
</span><span class="lnt" id="hl-3-61"><a class="lnlinks" href="#hl-3-61"> 61</a>
</span><span class="lnt" id="hl-3-62"><a class="lnlinks" href="#hl-3-62"> 62</a>
</span><span class="lnt" id="hl-3-63"><a class="lnlinks" href="#hl-3-63"> 63</a>
</span><span class="lnt" id="hl-3-64"><a class="lnlinks" href="#hl-3-64"> 64</a>
</span><span class="lnt" id="hl-3-65"><a class="lnlinks" href="#hl-3-65"> 65</a>
</span><span class="lnt" id="hl-3-66"><a class="lnlinks" href="#hl-3-66"> 66</a>
</span><span class="lnt" id="hl-3-67"><a class="lnlinks" href="#hl-3-67"> 67</a>
</span><span class="lnt" id="hl-3-68"><a class="lnlinks" href="#hl-3-68"> 68</a>
</span><span class="lnt" id="hl-3-69"><a class="lnlinks" href="#hl-3-69"> 69</a>
</span><span class="lnt" id="hl-3-70"><a class="lnlinks" href="#hl-3-70"> 70</a>
</span><span class="lnt" id="hl-3-71"><a class="lnlinks" href="#hl-3-71"> 71</a>
</span><span class="lnt" id="hl-3-72"><a class="lnlinks" href="#hl-3-72"> 72</a>
</span><span class="lnt" id="hl-3-73"><a class="lnlinks" href="#hl-3-73"> 73</a>
</span><span class="lnt" id="hl-3-74"><a class="lnlinks" href="#hl-3-74"> 74</a>
</span><span class="lnt" id="hl-3-75"><a class="lnlinks" href="#hl-3-75"> 75</a>
</span><span class="lnt" id="hl-3-76"><a class="lnlinks" href="#hl-3-76"> 76</a>
</span><span class="lnt" id="hl-3-77"><a class="lnlinks" href="#hl-3-77"> 77</a>
</span><span class="lnt" id="hl-3-78"><a class="lnlinks" href="#hl-3-78"> 78</a>
</span><span class="lnt" id="hl-3-79"><a class="lnlinks" href="#hl-3-79"> 79</a>
</span><span class="lnt" id="hl-3-80"><a class="lnlinks" href="#hl-3-80"> 80</a>
</span><span class="lnt" id="hl-3-81"><a class="lnlinks" href="#hl-3-81"> 81</a>
</span><span class="lnt" id="hl-3-82"><a class="lnlinks" href="#hl-3-82"> 82</a>
</span><span class="lnt" id="hl-3-83"><a class="lnlinks" href="#hl-3-83"> 83</a>
</span><span class="lnt" id="hl-3-84"><a class="lnlinks" href="#hl-3-84"> 84</a>
</span><span class="lnt" id="hl-3-85"><a class="lnlinks" href="#hl-3-85"> 85</a>
</span><span class="lnt" id="hl-3-86"><a class="lnlinks" href="#hl-3-86"> 86</a>
</span><span class="lnt" id="hl-3-87"><a class="lnlinks" href="#hl-3-87"> 87</a>
</span><span class="lnt" id="hl-3-88"><a class="lnlinks" href="#hl-3-88"> 88</a>
</span><span class="lnt" id="hl-3-89"><a class="lnlinks" href="#hl-3-89"> 89</a>
</span><span class="lnt" id="hl-3-90"><a class="lnlinks" href="#hl-3-90"> 90</a>
</span><span class="lnt" id="hl-3-91"><a class="lnlinks" href="#hl-3-91"> 91</a>
</span><span class="lnt" id="hl-3-92"><a class="lnlinks" href="#hl-3-92"> 92</a>
</span><span class="lnt" id="hl-3-93"><a class="lnlinks" href="#hl-3-93"> 93</a>
</span><span class="lnt" id="hl-3-94"><a class="lnlinks" href="#hl-3-94"> 94</a>
</span><span class="lnt" id="hl-3-95"><a class="lnlinks" href="#hl-3-95"> 95</a>
</span><span class="lnt" id="hl-3-96"><a class="lnlinks" href="#hl-3-96"> 96</a>
</span><span class="lnt" id="hl-3-97"><a class="lnlinks" href="#hl-3-97"> 97</a>
</span><span class="lnt" id="hl-3-98"><a class="lnlinks" href="#hl-3-98"> 98</a>
</span><span class="lnt" id="hl-3-99"><a class="lnlinks" href="#hl-3-99"> 99</a>
</span><span class="lnt" id="hl-3-100"><a class="lnlinks" href="#hl-3-100">100</a>
</span><span class="lnt" id="hl-3-101"><a class="lnlinks" href="#hl-3-101">101</a>
</span><span class="lnt" id="hl-3-102"><a class="lnlinks" href="#hl-3-102">102</a>
</span><span class="lnt" id="hl-3-103"><a class="lnlinks" href="#hl-3-103">103</a>
</span><span class="lnt" id="hl-3-104"><a class="lnlinks" href="#hl-3-104">104</a>
</span><span class="lnt" id="hl-3-105"><a class="lnlinks" href="#hl-3-105">105</a>
</span><span class="lnt" id="hl-3-106"><a class="lnlinks" href="#hl-3-106">106</a>
</span><span class="lnt" id="hl-3-107"><a class="lnlinks" href="#hl-3-107">107</a>
</span><span class="lnt" id="hl-3-108"><a class="lnlinks" href="#hl-3-108">108</a>
</span><span class="lnt" id="hl-3-109"><a class="lnlinks" href="#hl-3-109">109</a>
</span><span class="lnt" id="hl-3-110"><a class="lnlinks" href="#hl-3-110">110</a>
</span><span class="lnt" id="hl-3-111"><a class="lnlinks" href="#hl-3-111">111</a>
</span><span class="lnt" id="hl-3-112"><a class="lnlinks" href="#hl-3-112">112</a>
</span><span class="lnt" id="hl-3-113"><a class="lnlinks" href="#hl-3-113">113</a>
</span><span class="lnt" id="hl-3-114"><a class="lnlinks" href="#hl-3-114">114</a>
</span><span class="lnt" id="hl-3-115"><a class="lnlinks" href="#hl-3-115">115</a>
</span><span class="lnt" id="hl-3-116"><a class="lnlinks" href="#hl-3-116">116</a>
</span><span class="lnt" id="hl-3-117"><a class="lnlinks" href="#hl-3-117">117</a>
</span><span class="lnt" id="hl-3-118"><a class="lnlinks" href="#hl-3-118">118</a>
</span><span class="lnt" id="hl-3-119"><a class="lnlinks" href="#hl-3-119">119</a>
</span><span class="lnt" id="hl-3-120"><a class="lnlinks" href="#hl-3-120">120</a>
</span><span class="lnt" id="hl-3-121"><a class="lnlinks" href="#hl-3-121">121</a>
</span><span class="lnt" id="hl-3-122"><a class="lnlinks" href="#hl-3-122">122</a>
</span><span class="lnt" id="hl-3-123"><a class="lnlinks" href="#hl-3-123">123</a>
</span><span class="lnt" id="hl-3-124"><a class="lnlinks" href="#hl-3-124">124</a>
</span><span class="lnt" id="hl-3-125"><a class="lnlinks" href="#hl-3-125">125</a>
</span><span class="lnt" id="hl-3-126"><a class="lnlinks" href="#hl-3-126">126</a>
</span><span class="lnt" id="hl-3-127"><a class="lnlinks" href="#hl-3-127">127</a>
</span><span class="lnt" id="hl-3-128"><a class="lnlinks" href="#hl-3-128">128</a>
</span><span class="lnt" id="hl-3-129"><a class="lnlinks" href="#hl-3-129">129</a>
</span><span class="lnt" id="hl-3-130"><a class="lnlinks" href="#hl-3-130">130</a>
</span><span class="lnt" id="hl-3-131"><a class="lnlinks" href="#hl-3-131">131</a>
</span><span class="lnt" id="hl-3-132"><a class="lnlinks" href="#hl-3-132">132</a>
</span><span class="lnt" id="hl-3-133"><a class="lnlinks" href="#hl-3-133">133</a>
</span><span class="lnt" id="hl-3-134"><a class="lnlinks" href="#hl-3-134">134</a>
</span><span class="lnt" id="hl-3-135"><a class="lnlinks" href="#hl-3-135">135</a>
</span><span class="lnt" id="hl-3-136"><a class="lnlinks" href="#hl-3-136">136</a>
</span><span class="lnt" id="hl-3-137"><a class="lnlinks" href="#hl-3-137">137</a>
</span><span class="lnt" id="hl-3-138"><a class="lnlinks" href="#hl-3-138">138</a>
</span><span class="lnt" id="hl-3-139"><a class="lnlinks" href="#hl-3-139">139</a>
</span><span class="lnt" id="hl-3-140"><a class="lnlinks" href="#hl-3-140">140</a>
</span><span class="lnt" id="hl-3-141"><a class="lnlinks" href="#hl-3-141">141</a>
</span><span class="lnt" id="hl-3-142"><a class="lnlinks" href="#hl-3-142">142</a>
</span><span class="lnt" id="hl-3-143"><a class="lnlinks" href="#hl-3-143">143</a>
</span><span class="lnt" id="hl-3-144"><a class="lnlinks" href="#hl-3-144">144</a>
</span><span class="lnt" id="hl-3-145"><a class="lnlinks" href="#hl-3-145">145</a>
</span><span class="lnt" id="hl-3-146"><a class="lnlinks" href="#hl-3-146">146</a>
</span><span class="lnt" id="hl-3-147"><a class="lnlinks" href="#hl-3-147">147</a>
</span><span class="lnt" id="hl-3-148"><a class="lnlinks" href="#hl-3-148">148</a>
</span><span class="lnt" id="hl-3-149"><a class="lnlinks" href="#hl-3-149">149</a>
</span><span class="lnt" id="hl-3-150"><a class="lnlinks" href="#hl-3-150">150</a>
</span><span class="lnt" id="hl-3-151"><a class="lnlinks" href="#hl-3-151">151</a>
</span><span class="lnt" id="hl-3-152"><a class="lnlinks" href="#hl-3-152">152</a>
</span><span class="lnt" id="hl-3-153"><a class="lnlinks" href="#hl-3-153">153</a>
</span><span class="lnt" id="hl-3-154"><a class="lnlinks" href="#hl-3-154">154</a>
</span><span class="lnt" id="hl-3-155"><a class="lnlinks" href="#hl-3-155">155</a>
</span><span class="lnt" id="hl-3-156"><a class="lnlinks" href="#hl-3-156">156</a>
</span><span class="lnt" id="hl-3-157"><a class="lnlinks" href="#hl-3-157">157</a>
</span><span class="lnt" id="hl-3-158"><a class="lnlinks" href="#hl-3-158">158</a>
</span><span class="lnt" id="hl-3-159"><a class="lnlinks" href="#hl-3-159">159</a>
</span><span class="lnt" id="hl-3-160"><a class="lnlinks" href="#hl-3-160">160</a>
</span><span class="lnt" id="hl-3-161"><a class="lnlinks" href="#hl-3-161">161</a>
</span><span class="lnt" id="hl-3-162"><a class="lnlinks" href="#hl-3-162">162</a>
</span><span class="lnt" id="hl-3-163"><a class="lnlinks" href="#hl-3-163">163</a>
</span><span class="lnt" id="hl-3-164"><a class="lnlinks" href="#hl-3-164">164</a>
</span><span class="lnt" id="hl-3-165"><a class="lnlinks" href="#hl-3-165">165</a>
</span><span class="lnt" id="hl-3-166"><a class="lnlinks" href="#hl-3-166">166</a>
</span><span class="lnt" id="hl-3-167"><a class="lnlinks" href="#hl-3-167">167</a>
</span><span class="lnt" id="hl-3-168"><a class="lnlinks" href="#hl-3-168">168</a>
</span><span class="lnt" id="hl-3-169"><a class="lnlinks" href="#hl-3-169">169</a>
</span><span class="lnt" id="hl-3-170"><a class="lnlinks" href="#hl-3-170">170</a>
</span><span class="lnt" id="hl-3-171"><a class="lnlinks" href="#hl-3-171">171</a>
</span><span class="lnt" id="hl-3-172"><a class="lnlinks" href="#hl-3-172">172</a>
</span><span class="lnt" id="hl-3-173"><a class="lnlinks" href="#hl-3-173">173</a>
</span><span class="lnt" id="hl-3-174"><a class="lnlinks" href="#hl-3-174">174</a>
</span><span class="lnt" id="hl-3-175"><a class="lnlinks" href="#hl-3-175">175</a>
</span><span class="lnt" id="hl-3-176"><a class="lnlinks" href="#hl-3-176">176</a>
</span><span class="lnt" id="hl-3-177"><a class="lnlinks" href="#hl-3-177">177</a>
</span><span class="lnt" id="hl-3-178"><a class="lnlinks" href="#hl-3-178">178</a>
</span><span class="lnt" id="hl-3-179"><a class="lnlinks" href="#hl-3-179">179</a>
</span><span class="lnt" id="hl-3-180"><a class="lnlinks" href="#hl-3-180">180</a>
</span><span class="lnt" id="hl-3-181"><a class="lnlinks" href="#hl-3-181">181</a>
</span><span class="lnt" id="hl-3-182"><a class="lnlinks" href="#hl-3-182">182</a>
</span><span class="lnt" id="hl-3-183"><a class="lnlinks" href="#hl-3-183">183</a>
</span><span class="lnt" id="hl-3-184"><a class="lnlinks" href="#hl-3-184">184</a>
</span><span class="lnt" id="hl-3-185"><a class="lnlinks" href="#hl-3-185">185</a>
</span><span class="lnt" id="hl-3-186"><a class="lnlinks" href="#hl-3-186">186</a>
</span><span class="lnt" id="hl-3-187"><a class="lnlinks" href="#hl-3-187">187</a>
</span><span class="lnt" id="hl-3-188"><a class="lnlinks" href="#hl-3-188">188</a>
</span><span class="lnt" id="hl-3-189"><a class="lnlinks" href="#hl-3-189">189</a>
</span><span class="lnt" id="hl-3-190"><a class="lnlinks" href="#hl-3-190">190</a>
</span><span class="lnt" id="hl-3-191"><a class="lnlinks" href="#hl-3-191">191</a>
</span><span class="lnt" id="hl-3-192"><a class="lnlinks" href="#hl-3-192">192</a>
</span><span class="lnt" id="hl-3-193"><a class="lnlinks" href="#hl-3-193">193</a>
</span><span class="lnt" id="hl-3-194"><a class="lnlinks" href="#hl-3-194">194</a>
</span><span class="lnt" id="hl-3-195"><a class="lnlinks" href="#hl-3-195">195</a>
</span><span class="lnt" id="hl-3-196"><a class="lnlinks" href="#hl-3-196">196</a>
</span><span class="lnt" id="hl-3-197"><a class="lnlinks" href="#hl-3-197">197</a>
</span><span class="lnt" id="hl-3-198"><a class="lnlinks" href="#hl-3-198">198</a>
</span><span class="lnt" id="hl-3-199"><a class="lnlinks" href="#hl-3-199">199</a>
</span><span class="lnt" id="hl-3-200"><a class="lnlinks" href="#hl-3-200">200</a>
</span><span class="lnt" id="hl-3-201"><a class="lnlinks" href="#hl-3-201">201</a>
</span><span class="lnt" id="hl-3-202"><a class="lnlinks" href="#hl-3-202">202</a>
</span><span class="lnt" id="hl-3-203"><a class="lnlinks" href="#hl-3-203">203</a>
</span><span class="lnt" id="hl-3-204"><a class="lnlinks" href="#hl-3-204">204</a>
</span><span class="lnt" id="hl-3-205"><a class="lnlinks" href="#hl-3-205">205</a>
</span><span class="lnt" id="hl-3-206"><a class="lnlinks" href="#hl-3-206">206</a>
</span><span class="lnt" id="hl-3-207"><a class="lnlinks" href="#hl-3-207">207</a>
</span><span class="lnt" id="hl-3-208"><a class="lnlinks" href="#hl-3-208">208</a>
</span><span class="lnt" id="hl-3-209"><a class="lnlinks" href="#hl-3-209">209</a>
</span><span class="lnt" id="hl-3-210"><a class="lnlinks" href="#hl-3-210">210</a>
</span><span class="lnt" id="hl-3-211"><a class="lnlinks" href="#hl-3-211">211</a>
</span><span class="lnt" id="hl-3-212"><a class="lnlinks" href="#hl-3-212">212</a>
</span><span class="lnt" id="hl-3-213"><a class="lnlinks" href="#hl-3-213">213</a>
</span><span class="lnt" id="hl-3-214"><a class="lnlinks" href="#hl-3-214">214</a>
</span><span class="lnt" id="hl-3-215"><a class="lnlinks" href="#hl-3-215">215</a>
</span><span class="lnt" id="hl-3-216"><a class="lnlinks" href="#hl-3-216">216</a>
</span><span class="lnt" id="hl-3-217"><a class="lnlinks" href="#hl-3-217">217</a>
</span><span class="lnt" id="hl-3-218"><a class="lnlinks" href="#hl-3-218">218</a>
</span><span class="lnt" id="hl-3-219"><a class="lnlinks" href="#hl-3-219">219</a>
</span><span class="lnt" id="hl-3-220"><a class="lnlinks" href="#hl-3-220">220</a>
</span><span class="lnt" id="hl-3-221"><a class="lnlinks" href="#hl-3-221">221</a>
</span><span class="lnt" id="hl-3-222"><a class="lnlinks" href="#hl-3-222">222</a>
</span><span class="lnt" id="hl-3-223"><a class="lnlinks" href="#hl-3-223">223</a>
</span><span class="lnt" id="hl-3-224"><a class="lnlinks" href="#hl-3-224">224</a>
</span><span class="lnt" id="hl-3-225"><a class="lnlinks" href="#hl-3-225">225</a>
</span><span class="lnt" id="hl-3-226"><a class="lnlinks" href="#hl-3-226">226</a>
</span><span class="lnt" id="hl-3-227"><a class="lnlinks" href="#hl-3-227">227</a>
</span><span class="lnt" id="hl-3-228"><a class="lnlinks" href="#hl-3-228">228</a>
</span><span class="lnt" id="hl-3-229"><a class="lnlinks" href="#hl-3-229">229</a>
</span><span class="lnt" id="hl-3-230"><a class="lnlinks" href="#hl-3-230">230</a>
</span><span class="lnt" id="hl-3-231"><a class="lnlinks" href="#hl-3-231">231</a>
</span><span class="lnt" id="hl-3-232"><a class="lnlinks" href="#hl-3-232">232</a>
</span><span class="lnt" id="hl-3-233"><a class="lnlinks" href="#hl-3-233">233</a>
</span><span class="lnt" id="hl-3-234"><a class="lnlinks" href="#hl-3-234">234</a>
</span><span class="lnt" id="hl-3-235"><a class="lnlinks" href="#hl-3-235">235</a>
</span><span class="lnt" id="hl-3-236"><a class="lnlinks" href="#hl-3-236">236</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="ch">#!/usr/bin/env python3</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -*- coding: utf-8 -*-</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">批量创建文件夹工具（单层，统一保存到 ./result/）。
</span></span></span><span class="line"><span class="cl"><span class="s2">- 从 name.txt 读取名称（一行一个），多编码兼容，清洗非法字符。
</span></span></span><span class="line"><span class="cl"><span class="s2">- 在当前目录下的 result 文件夹中生成对应同名文件夹。
</span></span></span><span class="line"><span class="cl"><span class="s2">&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">argparse</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">csv</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">os</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">re</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">sys</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">time</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">unicodedata</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">concurrent.futures</span> <span class="kn">import</span> <span class="n">ThreadPoolExecutor</span><span class="p">,</span> <span class="n">as_completed</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Lock</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Tuple</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ---------- 常量 ----------</span>
</span></span><span class="line"><span class="cl"><span class="n">DEFAULT_INPUT</span> <span class="o">=</span> <span class="s2">&#34;name.txt&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">DEFAULT_MAX_LEN</span> <span class="o">=</span> <span class="mi">200</span>
</span></span><span class="line"><span class="cl"><span class="n">DEFAULT_EXIST</span> <span class="o">=</span> <span class="s2">&#34;skip&#34;</span>  <span class="c1"># skip | rename | fail</span>
</span></span><span class="line"><span class="cl"><span class="n">DEFAULT_RENAME_PATTERN</span> <span class="o">=</span> <span class="s2">&#34;</span><span class="si">{name}</span><span class="s2"> (</span><span class="si">{n}</span><span class="s2">)&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">ENCODING_CANDIDATES</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;utf-8-sig&#34;</span><span class="p">,</span> <span class="s2">&#34;utf-8&#34;</span><span class="p">,</span> <span class="s2">&#34;utf-16&#34;</span><span class="p">,</span> <span class="s2">&#34;utf-16-le&#34;</span><span class="p">,</span> <span class="s2">&#34;utf-16-be&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;gb18030&#34;</span><span class="p">,</span> <span class="s2">&#34;cp936&#34;</span><span class="p">,</span> <span class="s2">&#34;big5&#34;</span><span class="p">,</span> <span class="s2">&#34;shift_jis&#34;</span><span class="p">,</span> <span class="s2">&#34;cp1252&#34;</span><span class="p">,</span> <span class="s2">&#34;latin-1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">WINDOWS_RESERVED_BASENAMES</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;CON&#34;</span><span class="p">,</span> <span class="s2">&#34;PRN&#34;</span><span class="p">,</span> <span class="s2">&#34;AUX&#34;</span><span class="p">,</span> <span class="s2">&#34;NUL&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="o">*</span><span class="p">{</span><span class="sa">f</span><span class="s2">&#34;COM</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&#34;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)},</span>
</span></span><span class="line"><span class="cl">    <span class="o">*</span><span class="p">{</span><span class="sa">f</span><span class="s2">&#34;LPT</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&#34;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">ILLEGAL_CHARS_PATTERN</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[&lt;&gt;:&#34;/</span><span class="se">\\</span><span class="s1">|?*\x00-\x1F]&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">DOTS_ONLY_PATTERN</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&#34;^\.+$&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ---------- 数据结构 ----------</span>
</span></span><span class="line"><span class="cl"><span class="nd">@dataclass</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Item</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">line_no</span><span class="p">:</span> <span class="nb">int</span>
</span></span><span class="line"><span class="cl">    <span class="n">original</span><span class="p">:</span> <span class="nb">str</span>
</span></span><span class="line"><span class="cl">    <span class="n">cleaned</span><span class="p">:</span> <span class="nb">str</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@dataclass</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Result</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">item</span><span class="p">:</span> <span class="n">Item</span>
</span></span><span class="line"><span class="cl">    <span class="n">action</span><span class="p">:</span> <span class="nb">str</span>   <span class="c1"># created | skipped | renamed | error | dryrun</span>
</span></span><span class="line"><span class="cl">    <span class="n">final_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">final_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">status</span><span class="p">:</span> <span class="nb">str</span>   <span class="c1"># OK | ERROR</span>
</span></span><span class="line"><span class="cl">    <span class="n">error</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ---------- 工具函数 ----------</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">guess_read_text</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">forced_encoding</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">forced_encoding</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">read_text</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="n">forced_encoding</span><span class="p">),</span> <span class="n">forced_encoding</span>
</span></span><span class="line"><span class="cl">    <span class="n">data</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">read_bytes</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">last_err</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">enc</span> <span class="ow">in</span> <span class="n">ENCODING_CANDIDATES</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">enc</span><span class="p">),</span> <span class="n">enc</span>
</span></span><span class="line"><span class="cl">        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">last_err</span> <span class="o">=</span> <span class="n">e</span>
</span></span><span class="line"><span class="cl">            <span class="k">continue</span>
</span></span><span class="line"><span class="cl">    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;读取失败，未知编码；最后错误：</span><span class="si">{</span><span class="n">last_err</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">is_windows_reserved</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">base</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;.&#34;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">base</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="n">WINDOWS_RESERVED_BASENAMES</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">sanitize_name</span><span class="p">(</span><span class="n">raw</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">max_len</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_MAX_LEN</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">s</span> <span class="o">=</span> <span class="n">unicodedata</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="s2">&#34;NFKC&#34;</span><span class="p">,</span> <span class="n">raw</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="s2">&#34;/&#34;</span> <span class="ow">in</span> <span class="n">s</span> <span class="ow">or</span> <span class="s2">&#34;</span><span class="se">\\</span><span class="s2">&#34;</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;/&#34;</span><span class="p">,</span> <span class="s2">&#34;_&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;</span><span class="se">\\</span><span class="s2">&#34;</span><span class="p">,</span> <span class="s2">&#34;_&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">ILLEGAL_CHARS_PATTERN</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">s</span> <span class="o">=</span> <span class="n">ILLEGAL_CHARS_PATTERN</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&#34;_&#34;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&#34; .&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">DOTS_ONLY_PATTERN</span><span class="o">.</span><span class="k">match</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">is_windows_reserved</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="s2">&#34;_&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">max_len</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[:</span><span class="n">max_len</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">s</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">parse_lines</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
</span></span><span class="line"><span class="cl">    <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(),</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">raw</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&#34;</span><span class="se">\r\n</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="ow">not</span> <span class="n">raw</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="k">continue</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">raw</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&#34;#&#34;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">continue</span>
</span></span><span class="line"><span class="cl">        <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">idx</span><span class="p">,</span> <span class="n">raw</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">res</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ---------- 主执行逻辑 ----------</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">App</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">base</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&#34;result&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># 自动创建 result 文件夹</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">counter_ok</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">counter_skip</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">counter_err</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">counter_renamed</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Result</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">log_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="n">Result</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">quiet</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span>
</span></span><span class="line"><span class="cl">        <span class="n">name</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">final_name</span> <span class="ow">or</span> <span class="n">result</span><span class="o">.</span><span class="n">item</span><span class="o">.</span><span class="n">cleaned</span> <span class="ow">or</span> <span class="n">result</span><span class="o">.</span><span class="n">item</span><span class="o">.</span><span class="n">original</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s2">&#34;OK&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="s2">&#34;created&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;[OK] </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">elif</span> <span class="n">result</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="s2">&#34;renamed&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;[OK] </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> (renamed)&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">elif</span> <span class="n">result</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="s2">&#34;dryrun&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;[DRY] </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">elif</span> <span class="n">result</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="s2">&#34;skipped&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;[SKIP] </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> (exists)&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">reason</span> <span class="o">=</span> <span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">error</span> <span class="ow">or</span> <span class="s2">&#34;unknown&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;[ERROR] </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">reason</span><span class="si">}</span><span class="s2">)&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">make_one</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Item</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span>
</span></span><span class="line"><span class="cl">        <span class="n">name</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">cleaned</span>
</span></span><span class="line"><span class="cl">        <span class="n">target</span> <span class="o">=</span> <span class="n">base</span> <span class="o">/</span> <span class="n">name</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">dry_run</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">Result</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">&#34;dryrun&#34;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">target</span><span class="p">),</span> <span class="s2">&#34;OK&#34;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">target</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">Result</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">&#34;created&#34;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">target</span><span class="p">),</span> <span class="s2">&#34;OK&#34;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">except</span> <span class="ne">FileExistsError</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">exist</span> <span class="o">==</span> <span class="s2">&#34;skip&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">Result</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">&#34;skipped&#34;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">target</span><span class="p">),</span> <span class="s2">&#34;OK&#34;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">exist</span> <span class="o">==</span> <span class="s2">&#34;fail&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">Result</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">&#34;error&#34;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">target</span><span class="p">),</span> <span class="s2">&#34;ERROR&#34;</span><span class="p">,</span> <span class="s2">&#34;already_exists&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">exist</span> <span class="o">==</span> <span class="s2">&#34;rename&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">base_name</span> <span class="o">=</span> <span class="n">name</span>
</span></span><span class="line"><span class="cl">                <span class="n">n</span> <span class="o">=</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl">                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">try_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">rename_pattern</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">base_name</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="n">try_name</span> <span class="o">=</span> <span class="n">sanitize_name</span><span class="p">(</span><span class="n">try_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">max_name_length</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="ow">not</span> <span class="n">try_name</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="k">return</span> <span class="n">Result</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">&#34;error&#34;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&#34;ERROR&#34;</span><span class="p">,</span> <span class="s2">&#34;rename_failed&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="n">try_path</span> <span class="o">=</span> <span class="n">base</span> <span class="o">/</span> <span class="n">try_name</span>
</span></span><span class="line"><span class="cl">                    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="n">try_path</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="k">return</span> <span class="n">Result</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">&#34;renamed&#34;</span><span class="p">,</span> <span class="n">try_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">try_path</span><span class="p">),</span> <span class="s2">&#34;OK&#34;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">except</span> <span class="ne">FileExistsError</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">                        <span class="k">continue</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">Result</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">&#34;error&#34;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">target</span><span class="p">),</span> <span class="s2">&#34;ERROR&#34;</span><span class="p">,</span> <span class="s2">&#34;unknown_exist_strategy&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">Result</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">&#34;error&#34;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">target</span><span class="p">),</span> <span class="s2">&#34;ERROR&#34;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">inp</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">input</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="ow">not</span> <span class="n">inp</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;[FATAL] 输入文件不存在: </span><span class="si">{</span><span class="n">inp</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">text</span><span class="p">,</span> <span class="n">used_enc</span> <span class="o">=</span> <span class="n">guess_read_text</span><span class="p">(</span><span class="n">inp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">encoding</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;[FATAL] 无法读取输入：</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">line_no</span><span class="p">,</span> <span class="n">raw</span> <span class="ow">in</span> <span class="n">parse_lines</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">cleaned</span> <span class="o">=</span> <span class="n">sanitize_name</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">max_name_length</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="ow">not</span> <span class="n">cleaned</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">r</span> <span class="o">=</span> <span class="n">Result</span><span class="p">(</span><span class="n">Item</span><span class="p">(</span><span class="n">line_no</span><span class="p">,</span> <span class="n">raw</span><span class="p">,</span> <span class="n">cleaned</span><span class="p">),</span> <span class="s2">&#34;error&#34;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&#34;ERROR&#34;</span><span class="p">,</span> <span class="s2">&#34;invalid_or_empty&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">log_line</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">counter_err</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">                <span class="k">continue</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Item</span><span class="p">(</span><span class="n">line_no</span><span class="p">,</span> <span class="n">raw</span><span class="p">,</span> <span class="n">cleaned</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># 并发执行</span>
</span></span><span class="line"><span class="cl">        <span class="n">tasks</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        <span class="k">with</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">max_workers</span><span class="p">)</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">future_map</span> <span class="o">=</span> <span class="p">{</span><span class="n">ex</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">make_one</span><span class="p">,</span> <span class="n">it</span><span class="p">):</span> <span class="n">it</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="n">Item</span><span class="p">)}</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">fut</span> <span class="ow">in</span> <span class="n">as_completed</span><span class="p">(</span><span class="n">future_map</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="n">r</span> <span class="o">=</span> <span class="n">fut</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">log_line</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s2">&#34;OK&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="s2">&#34;created&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="bp">self</span><span class="o">.</span><span class="n">counter_ok</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">                    <span class="k">elif</span> <span class="n">r</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="s2">&#34;skipped&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="bp">self</span><span class="o">.</span><span class="n">counter_skip</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">                    <span class="k">elif</span> <span class="n">r</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="s2">&#34;renamed&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="bp">self</span><span class="o">.</span><span class="n">counter_renamed</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">                <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="bp">self</span><span class="o">.</span><span class="n">counter_err</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">elapsed</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
</span></span><span class="line"><span class="cl">        <span class="n">total_ok</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">counter_ok</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">counter_renamed</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;总结: 成功 </span><span class="si">{</span><span class="n">total_ok</span><span class="si">}</span><span class="s2">, 跳过 </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">counter_skip</span><span class="si">}</span><span class="s2">, 错误 </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">counter_err</span><span class="si">}</span><span class="s2">, 用时 </span><span class="si">{</span><span class="n">elapsed</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">s&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">counter_err</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="p">(</span><span class="n">total_ok</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">counter_skip</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">counter_err</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ---------- 参数 ----------</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">build_argparser</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&#34;从 name.txt 批量创建文件夹，保存到 ./result/&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;--input&#34;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_INPUT</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&#34;输入文件（默认 name.txt）&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;--encoding&#34;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&#34;指定输入编码&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;--exist&#34;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&#34;skip&#34;</span><span class="p">,</span> <span class="s2">&#34;rename&#34;</span><span class="p">,</span> <span class="s2">&#34;fail&#34;</span><span class="p">],</span> <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_EXIST</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&#34;已存在处理策略（默认 skip）&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;--rename-pattern&#34;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_RENAME_PATTERN</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&#34;重命名模板，含 </span><span class="si">{name}</span><span class="s2"> 和 </span><span class="si">{n}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;--max-name-length&#34;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_MAX_LEN</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&#34;文件夹名最大长度（默认200）&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">default_workers</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">()</span> <span class="ow">or</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;--max-workers&#34;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">default_workers</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="sa">f</span><span class="s2">&#34;并发线程数（默认 </span><span class="si">{</span><span class="n">default_workers</span><span class="si">}</span><span class="s2">）&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;--dry-run&#34;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&#34;store_true&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&#34;仅预演，不创建目录&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;--quiet&#34;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&#34;store_true&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&#34;仅输出汇总&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">p</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">argv</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">args</span> <span class="o">=</span> <span class="n">build_argparser</span><span class="p">()</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">app</span> <span class="o">=</span> <span class="n">App</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">code</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">code</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&#34;__main__&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="视频版本">视频版本<a hidden class="anchor" aria-hidden="true" href="#视频版本">#</a></h2>
<ul>
<li><a href="https://space.bilibili.com/3546607630944387">哔哩哔哩</a></li>
<li><a href="https://www.youtube.com/@itxiaozhang">YouTube</a></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/%E6%89%B9%E9%87%8F/">批量</a></li>
      <li><a href="http://localhost:1313/tags/python/">Python</a></li>
      <li><a href="http://localhost:1313/tags/chatgpt/">Chatgpt</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2026 <a href="http://localhost:1313/">IT小章</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
